[
  {
    "objectID": "final_code.html",
    "href": "final_code.html",
    "title": "Collecting Data",
    "section": "",
    "text": "import io\nimport requests\nimport numpy as np\nimport pandas as pd\nimport shinybroker as sb\nimport matplotlib.pyplot as plt\n\nfrom bs4 import BeautifulSoup\n\n\nasset_symbols = ['AAPL', 'MSFT', 'JPM', 'XOM', 'JNJ', 'PG', 'NVDA', 'CAT', 'HD', 'AMZN']\n\n\ndef calc_trd_prd(timestamps, freq = 'M'):\n    if freq == 'W':\n        return [ts.isocalendar()[0] + ts.isocalendar()[1] / 100 for ts in timestamps]\n    elif freq == 'M':\n        return [ts.year + ts.month / 100 for ts in timestamps]\n\n\nimport os\n\nroot = os.getcwd()\ndata_root = os.path.join(root, 'HistoryData')\n\nif not os.path.exists(data_root):\n    os.makedirs(data_root)\n    print('HistoryData directory created')\nelse:\n    print('HistoryData folder already exists')\n\ndaily_data_dict = {}\nhourly_data_dict = {}\ndaily_iv_dict = {}\nfor symbol in asset_symbols:\n    print(f\"\\n Fetching: {symbol}\")\n\n    contract = sb.Contract({\n        'symbol': symbol,\n        'secType': \"STK\",\n        'exchange': \"SMART\",\n        'currency': \"USD\"\n    })\n\n    df_daily = sb.fetch_historical_data(\n        contract=contract,\n        barSizeSetting=\"1 day\",\n        durationStr=\"8 M\"\n    )['hst_dta']\n\n    df_hourly = sb.fetch_historical_data(\n        contract=contract,\n        barSizeSetting=\"1 hour\",\n        durationStr=\"8 M\"\n    )['hst_dta']\n\n    df_daily_iv = sb.fetch_historical_data(\n        contract=contract,\n        barSizeSetting=\"1 day\",\n        durationStr=\"10 M\",\n        whatToShow=\"OPTION_IMPLIED_VOLATILITY\"\n    )['hst_dta']\n\n    df_daily['trd_prd'] = calc_trd_prd(df_daily['timestamp'])\n    df_hourly['trd_prd'] = calc_trd_prd(df_hourly['timestamp'])\n    df_daily_iv['trd_prd'] = calc_trd_prd(df_daily_iv['timestamp'])\n\n    df_daily.to_csv(os.path.join(data_root, f'{symbol}_daily.csv'))\n    df_hourly.to_csv(os.path.join(data_root, f'{symbol}_hourly.csv'))\n    df_daily_iv.to_csv(os.path.join(data_root, f'{symbol}_iv.csv'))\n\n    daily_data_dict[symbol] = df_daily\n    hourly_data_dict[symbol] = df_hourly\n    daily_iv_dict[symbol] = df_daily_iv\n\n\nprint(daily_data_dict)\nprint(hourly_data_dict)\nprint(daily_iv_dict)\n\n\n Fetching: CAT\n\n Fetching: HD\n\n Fetching: AMZN\n{'AAPL':       timestamp    open    high     low   close    volume      wap  barCount  \\\n0    2024-09-03  228.55  229.00  221.17  222.77  27800491  224.005    155414   \n1    2024-09-04  221.70  221.78  217.48  220.85  27586896  219.774    142977   \n2    2024-09-05  221.73  225.48  221.52  222.38  21549150  223.325    115868   \n3    2024-09-06  224.00  225.24  219.77  220.82  26076978  221.990    133485   \n4    2024-09-09  220.83  221.27  216.71  220.91  44734345  219.098    222732   \n..          ...     ...     ...     ...     ...       ...      ...       ...   \n160  2025-04-24  204.94  208.83  202.94  208.37  21895737  206.480    125147   \n161  2025-04-25  206.35  209.75  206.20  209.28  19849630  208.137    108876   \n162  2025-04-28  210.06  211.50  207.46  210.14  19037050  209.496    101542   \n163  2025-04-29  208.80  212.24  208.37  211.21  16645097  210.940     91644   \n164  2025-04-30  209.26  211.85  206.67  210.77  12048802  209.599     62427   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'MSFT':       timestamp    open    high     low   close   volume      wap  barCount  \\\n0    2024-09-03  417.95  419.88  407.03  409.44  7850424  412.829     46056   \n1    2024-09-04  405.79  411.24  404.37  408.90  7333880  408.382     43040   \n2    2024-09-05  407.62  413.10  406.13  408.39  6651606  408.910     41539   \n3    2024-09-06  409.49  410.65  400.80  401.70  7475042  403.583     42439   \n4    2024-09-09  407.12  408.65  402.15  405.72  7376986  404.838     37556   \n..          ...     ...     ...     ...     ...      ...      ...       ...   \n160  2025-04-24  375.41  388.45  375.19  387.30  8506978  384.121     56708   \n161  2025-04-25  387.00  392.16  384.60  391.85  7529031  389.041     50815   \n162  2025-04-28  392.08  392.74  386.63  391.16  7255229  389.872     47408   \n163  2025-04-29  391.04  395.00  390.38  394.04  6289668  393.386     38689   \n164  2025-04-30  390.21  391.69  384.44  390.06  6527922  388.526     41080   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'JPM':       timestamp    open    high     low   close   volume      wap  barCount  \\\n0    2024-09-03  222.30  224.10  219.24  220.30  4810695  221.393     28856   \n1    2024-09-04  221.04  222.07  217.21  219.33  4067940  219.735     25588   \n2    2024-09-05  220.15  220.80  216.03  217.63  4357670  218.028     24919   \n3    2024-09-06  217.60  218.74  211.09  212.46  4046060  214.139     24690   \n4    2024-09-09  215.19  218.15  214.17  216.81  4024539  216.637     23177   \n..          ...     ...     ...     ...     ...      ...      ...       ...   \n160  2025-04-24  239.74  245.47  237.58  244.64  5115597  242.897     33844   \n161  2025-04-25  244.65  245.62  241.75  243.55  3568676  243.406     22388   \n162  2025-04-28  244.56  246.85  240.84  243.22  3509849  242.895     21267   \n163  2025-04-29  242.19  245.25  241.69  244.62  3371252  244.131     22227   \n164  2025-04-30  241.21  243.00  238.43  242.25  2625569  240.947     15840   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'XOM':       timestamp    open    high     low   close    volume      wap  barCount  \\\n0    2024-09-03  115.84  116.09  114.04  115.47   7824922  115.224     41167   \n1    2024-09-04  115.29  116.15  113.97  114.06   7133340  114.881     33888   \n2    2024-09-05  115.07  115.28  113.07  113.17   6949548  113.966     35085   \n3    2024-09-06  113.59  114.18  111.73  112.64   7212147  112.635     38243   \n4    2024-09-09  112.87  116.15  112.66  115.01  13655028  115.040     69188   \n..          ...     ...     ...     ...     ...       ...      ...       ...   \n160  2025-04-24  107.97  108.88  106.96  108.63   5167225  108.137     29472   \n161  2025-04-25  108.14  108.76  107.42  108.57   4718570  108.237     28312   \n162  2025-04-28  108.75  109.25  107.68  108.63   5194999  108.485     30878   \n163  2025-04-29  107.74  108.83  107.52  108.36   4882985  108.266     30394   \n164  2025-04-30  107.42  107.42  104.15  105.04   7266699  105.710     41641   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'JNJ':       timestamp    open    high     low   close   volume      wap  barCount  \\\n0    2024-09-03  165.24  167.81  164.77  167.16  3293639  166.932     18880   \n1    2024-09-04  167.81  168.85  166.04  167.36  3716323  167.402     20633   \n2    2024-09-05  167.20  167.37  164.83  164.99  2201018  165.785     13344   \n3    2024-09-06  165.18  165.94  164.12  164.38  2224976  164.833     13398   \n4    2024-09-09  164.84  167.41  164.47  166.61  3433668  166.536     17418   \n..          ...     ...     ...     ...     ...      ...      ...       ...   \n160  2025-04-24  155.80  155.90  153.44  154.93  4663728  154.437     23967   \n161  2025-04-25  154.32  154.90  152.45  154.58  4862818  153.821     30553   \n162  2025-04-28  155.50  155.81  153.82  155.35  2861963  155.075     17312   \n163  2025-04-29  155.45  157.02  154.29  155.91  2562378  156.128     17615   \n164  2025-04-30  158.20  158.20  155.07  155.81  1770870  155.918     11992   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'PG':       timestamp    open    high     low   close    volume      wap  barCount  \\\n0    2024-09-03  171.03  175.00  170.99  174.52   4644091  173.819     23517   \n1    2024-09-04  173.63  176.00  173.63  175.90   3362278  175.205     15348   \n2    2024-09-05  175.99  176.55  174.67  175.47   2638945  175.572     15213   \n3    2024-09-06  175.76  177.04  175.34  175.59   2634944  176.108     15730   \n4    2024-09-09  175.54  176.84  174.66  176.06   2613870  175.874     14767   \n..          ...     ...     ...     ...     ...       ...      ...       ...   \n160  2025-04-24  160.50  160.96  156.58  159.53  11734049  158.760     72422   \n161  2025-04-25  159.88  161.80  157.77  161.02   7659314  159.865     42108   \n162  2025-04-28  161.04  162.56  160.39  161.85   3987021  161.509     24938   \n163  2025-04-29  161.28  162.39  159.20  162.26   3871092  161.603     24372   \n164  2025-04-30  162.45  163.08  159.95  161.97   2014836  161.335     12686   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'NVDA':       timestamp    open    high     low   close     volume      wap  barCount  \\\n0    2024-09-03  116.01  116.21  107.29  108.00  353878209  110.529   1029657   \n1    2024-09-04  105.40  109.99  104.12  106.21  300265583  107.433    863910   \n2    2024-09-05  104.97  109.65  104.76  107.21  236896049  107.518    649450   \n3    2024-09-06  108.06  108.15  100.95  102.83  307106247  103.297    889372   \n4    2024-09-09  104.86  106.55  103.69  106.47  207564871  105.334    557331   \n..          ...     ...     ...     ...     ...        ...      ...       ...   \n160  2025-04-24  103.49  106.54  103.11  106.43  153070523  105.440    527622   \n161  2025-04-25  106.86  111.92  105.73  111.01  191454295  109.484    658331   \n162  2025-04-28  109.70  110.37  106.02  108.73  150002768  107.869    501680   \n163  2025-04-29  107.67  110.20  107.44  109.02  128526226  109.018    416805   \n164  2025-04-30  104.48  107.27  104.08  106.95  102638582  105.836    358489   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'CAT':       timestamp    open    high     low   close   volume      wap  barCount  \\\n0    2024-09-03  352.21  352.63  338.40  340.24  1561491  341.648     10302   \n1    2024-09-04  338.59  340.85  335.29  336.75   785571  337.586      5261   \n2    2024-09-05  336.02  336.49  330.56  333.56  1197110  333.299      7883   \n3    2024-09-06  334.20  338.62  328.12  329.36  1144155  330.603      8008   \n4    2024-09-09  333.91  336.36  332.97  334.04  1055039  334.632      7096   \n..          ...     ...     ...     ...     ...      ...      ...       ...   \n160  2025-04-24  297.43  308.21  297.07  306.86  1284464  305.698      9481   \n161  2025-04-25  305.10  307.99  303.91  306.45  1091024  305.985      7580   \n162  2025-04-28  306.45  311.43  303.85  307.06   982793  307.174      6946   \n163  2025-04-29  305.00  308.67  302.91  307.40  1219599  306.670      9018   \n164  2025-04-30  315.21  316.05  302.17  303.57  1321562  307.278      8847   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'HD':       timestamp    open    high     low   close   volume      wap  barCount  \\\n0    2024-09-03  367.90  369.38  362.90  364.74   929997  365.947      6612   \n1    2024-09-04  364.17  365.93  360.01  364.67  1340658  363.514      7782   \n2    2024-09-05  364.90  365.15  357.58  361.85  1098417  360.605      8141   \n3    2024-09-06  362.92  365.44  359.42  360.05   869802  361.684      6272   \n4    2024-09-09  362.76  366.16  360.03  365.52   949434  364.140      6436   \n..          ...     ...     ...     ...     ...      ...      ...       ...   \n160  2025-04-24  356.50  360.40  354.61  359.64   914824  358.552      6621   \n161  2025-04-25  357.70  359.00  354.74  357.58   908330  356.638      5968   \n162  2025-04-28  357.99  360.10  354.51  356.92   849381  357.094      5851   \n163  2025-04-29  355.89  360.58  354.73  359.00  1141244  358.882      8203   \n164  2025-04-30  356.50  358.14  352.38  357.69   670920  355.116      4921   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns], 'AMZN':       timestamp    open    high     low   close    volume      wap  barCount  \\\n0    2024-09-03  177.55  178.26  175.26  176.25  23449672  176.514    109837   \n1    2024-09-04  174.44  175.98  172.54  173.33  18780456  174.038     89203   \n2    2024-09-05  175.03  179.88  174.99  177.89  26927218  177.648    129174   \n3    2024-09-06  177.28  178.38  171.16  171.39  21536348  173.289    110416   \n4    2024-09-09  174.53  175.85  173.51  175.40  16695426  174.655     73172   \n..          ...     ...     ...     ...     ...       ...      ...       ...   \n160  2025-04-24  180.76  186.74  180.18  186.54  24600422  184.347    128798   \n161  2025-04-25  187.62  189.94  185.49  188.99  22186683  187.825    112985   \n162  2025-04-28  190.11  190.22  184.88  187.70  19080037  187.391    102003   \n163  2025-04-29  183.98  188.02  183.68  187.39  26680100  186.167    128967   \n164  2025-04-30  182.17  182.25  178.85  181.88  18182650  180.886     96864   \n\n     trd_prd  \n0    2024.09  \n1    2024.09  \n2    2024.09  \n3    2024.09  \n4    2024.09  \n..       ...  \n160  2025.04  \n161  2025.04  \n162  2025.04  \n163  2025.04  \n164  2025.04  \n\n[165 rows x 9 columns]}\n{'AAPL':                timestamp    open    high     low   close   volume      wap  \\\n0    2024-09-03 09:30:00  228.55  229.00  225.30  226.16  5159511  226.992   \n1    2024-09-03 10:00:00  226.19  226.48  223.51  223.65  4867498  224.802   \n2    2024-09-03 11:00:00  223.65  224.67  223.27  223.54  3094347  224.041   \n3    2024-09-03 12:00:00  223.55  224.32  223.34  223.71  2245287  223.806   \n4    2024-09-03 13:00:00  223.72  224.15  223.18  223.21  1967720  223.666   \n...                  ...     ...     ...     ...     ...      ...      ...   \n1143 2025-04-30 10:00:00  207.19  209.75  207.14  209.64  2871603  208.752   \n1144 2025-04-30 11:00:00  209.59  211.13  209.56  211.05  2370732  210.424   \n1145 2025-04-30 12:00:00  211.04  211.36  210.22  210.92  1755087  210.844   \n1146 2025-04-30 13:00:00  210.92  211.85  209.80  211.10  1817259  211.025   \n1147 2025-04-30 14:00:00  211.13  211.18  210.76  210.77   110841  210.914   \n\n      barCount  trd_prd  \n0        22740  2024.09  \n1        27873  2024.09  \n2        18076  2024.09  \n3        13506  2024.09  \n4        11376  2024.09  \n...        ...      ...  \n1143     15268  2025.04  \n1144     13329  2025.04  \n1145      9340  2025.04  \n1146      9500  2025.04  \n1147       585  2025.04  \n\n[1148 rows x 9 columns], 'MSFT':                timestamp    open    high     low   close   volume      wap  \\\n0    2024-09-03 09:30:00  417.95  419.88  415.34  418.21  1424921  417.812   \n1    2024-09-03 10:00:00  418.15  418.50  413.05  413.40  1447443  415.936   \n2    2024-09-03 11:00:00  413.50  414.11  411.51  411.60   858323  413.137   \n3    2024-09-03 12:00:00  411.63  413.21  410.88  411.21   679437  411.793   \n4    2024-09-03 13:00:00  411.22  412.03  410.85  410.97   515289  411.314   \n...                  ...     ...     ...     ...     ...      ...      ...   \n1143 2025-04-30 10:00:00  385.10  389.16  384.44  388.60  1552074  387.020   \n1144 2025-04-30 11:00:00  388.53  391.04  388.47  390.35  1056049  390.064   \n1145 2025-04-30 12:00:00  390.37  390.86  388.76  390.09   932525  389.831   \n1146 2025-04-30 13:00:00  390.05  391.69  387.98  390.47  1180959  389.759   \n1147 2025-04-30 14:00:00  390.54  390.57  390.06  390.06    36205  390.326   \n\n      barCount  trd_prd  \n0         5964  2024.09  \n1         8586  2024.09  \n2         5007  2024.09  \n3         3962  2024.09  \n4         3150  2024.09  \n...        ...      ...  \n1143     10821  2025.04  \n1144      6947  2025.04  \n1145      6195  2025.04  \n1146      7651  2025.04  \n1147       253  2025.04  \n\n[1148 rows x 9 columns], 'JPM':                timestamp    open    high     low   close  volume      wap  \\\n0    2024-09-03 09:30:00  222.30  224.10  222.02  223.02  728800  222.879   \n1    2024-09-03 10:00:00  222.97  223.20  220.42  221.73  795413  221.254   \n2    2024-09-03 11:00:00  221.73  222.98  221.50  222.78  614272  222.371   \n3    2024-09-03 12:00:00  222.80  223.32  222.09  222.14  443699  222.566   \n4    2024-09-03 13:00:00  222.15  222.64  221.54  221.59  366021  221.989   \n...                  ...     ...     ...     ...     ...     ...      ...   \n1143 2025-04-30 10:00:00  238.63  241.92  238.48  241.60  727865  240.002   \n1144 2025-04-30 11:00:00  241.68  242.39  241.28  242.12  453652  241.850   \n1145 2025-04-30 12:00:00  242.03  242.46  241.20  242.11  242822  241.891   \n1146 2025-04-30 13:00:00  242.18  242.80  241.30  242.28  217146  242.261   \n1147 2025-04-30 14:00:00  242.36  242.39  242.22  242.25   20718  242.319   \n\n      barCount  trd_prd  \n0         3132  2024.09  \n1         4938  2024.09  \n2         3340  2024.09  \n3         2886  2024.09  \n4         2359  2024.09  \n...        ...      ...  \n1143      4679  2025.04  \n1144      3245  2025.04  \n1145      1703  2025.04  \n1146      1558  2025.04  \n1147       189  2025.04  \n\n[1148 rows x 9 columns], 'XOM':                timestamp    open    high     low   close   volume      wap  \\\n0    2024-09-03 09:30:00  115.84  115.97  114.62  114.70  1260424  115.223   \n1    2024-09-03 10:00:00  114.70  114.89  114.04  114.75  1442767  114.397   \n2    2024-09-03 11:00:00  114.74  115.36  114.46  115.12  1265923  114.931   \n3    2024-09-03 12:00:00  115.12  115.77  115.12  115.56   763750  115.571   \n4    2024-09-03 13:00:00  115.55  115.99  115.51  115.79   650146  115.759   \n...                  ...     ...     ...     ...     ...      ...      ...   \n1143 2025-04-30 10:00:00  105.82  106.60  105.80  106.41  1431516  106.173   \n1144 2025-04-30 11:00:00  106.43  106.99  104.15  104.70  2715435  105.642   \n1145 2025-04-30 12:00:00  104.69  105.31  104.54  105.17   991233  104.905   \n1146 2025-04-30 13:00:00  105.18  105.24  104.69  105.01   878951  105.019   \n1147 2025-04-30 14:00:00  105.02  105.05  104.92  105.04    38247  104.980   \n\n      barCount  trd_prd  \n0         5265  2024.09  \n1         7984  2024.09  \n2         6535  2024.09  \n3         4202  2024.09  \n4         3757  2024.09  \n...        ...      ...  \n1143      8095  2025.04  \n1144     16051  2025.04  \n1145      6052  2025.04  \n1146      5092  2025.04  \n1147       283  2025.04  \n\n[1148 rows x 9 columns], 'JNJ':                timestamp    open    high     low   close  volume      wap  \\\n0    2024-09-03 09:30:00  165.24  166.80  164.77  166.53  507902  165.921   \n1    2024-09-03 10:00:00  166.60  167.48  166.26  167.43  536715  166.875   \n2    2024-09-03 11:00:00  167.43  167.58  166.32  167.10  359542  166.879   \n3    2024-09-03 12:00:00  167.10  167.67  166.94  167.12  302752  167.329   \n4    2024-09-03 13:00:00  167.16  167.48  167.00  167.33  253748  167.285   \n...                  ...     ...     ...     ...     ...     ...      ...   \n1143 2025-04-30 10:00:00  155.36  156.03  155.07  155.94  452852  155.531   \n1144 2025-04-30 11:00:00  155.97  156.09  155.44  155.57  283580  155.817   \n1145 2025-04-30 12:00:00  155.59  155.88  155.56  155.74  291288  155.705   \n1146 2025-04-30 13:00:00  155.76  155.98  155.40  155.85  284817  155.736   \n1147 2025-04-30 14:00:00  155.85  155.86  155.70  155.81   18995  155.771   \n\n      barCount  trd_prd  \n0         1586  2024.09  \n1         2952  2024.09  \n2         2204  2024.09  \n3         1754  2024.09  \n4         1517  2024.09  \n...        ...      ...  \n1143      3374  2025.04  \n1144      2170  2025.04  \n1145      2088  2025.04  \n1146      1987  2025.04  \n1147       145  2025.04  \n\n[1148 rows x 9 columns], 'PG':                timestamp    open    high     low   close   volume      wap  \\\n0    2024-09-03 09:30:00  171.03  173.33  170.99  173.33  1233919  172.066   \n1    2024-09-03 10:00:00  173.37  174.85  173.19  174.82   706059  173.995   \n2    2024-09-03 11:00:00  174.80  175.00  173.83  174.30   789304  174.681   \n3    2024-09-03 12:00:00  174.29  174.89  174.04  174.49   306583  174.439   \n4    2024-09-03 13:00:00  174.49  174.95  174.44  174.91   249363  174.699   \n...                  ...     ...     ...     ...     ...      ...      ...   \n1143 2025-04-30 10:00:00  160.37  161.66  159.95  161.49   557221  160.610   \n1144 2025-04-30 11:00:00  161.52  161.68  161.03  161.45   261066  161.342   \n1145 2025-04-30 12:00:00  161.45  162.18  161.38  161.99   246808  161.741   \n1146 2025-04-30 13:00:00  162.00  162.09  161.56  161.97   353272  161.933   \n1147 2025-04-30 14:00:00  161.96  162.01  161.85  161.97    46040  161.935   \n\n      barCount  trd_prd  \n0         3285  2024.09  \n1         3622  2024.09  \n2         3910  2024.09  \n3         1938  2024.09  \n4         1776  2024.09  \n...        ...      ...  \n1143      4005  2025.04  \n1144      1876  2025.04  \n1145      1643  2025.04  \n1146      2054  2025.04  \n1147       252  2025.04  \n\n[1148 rows x 9 columns], 'NVDA':                timestamp    open    high     low   close    volume      wap  \\\n0    2024-09-03 09:30:00  116.01  116.21  112.01  112.91  55565367  113.563   \n1    2024-09-03 10:00:00  112.93  113.53  109.61  109.77  78685232  111.406   \n2    2024-09-03 11:00:00  109.77  111.68  109.39  110.36  47581597  110.831   \n3    2024-09-03 12:00:00  110.35  110.84  109.80  110.17  33882214  110.313   \n4    2024-09-03 13:00:00  110.18  110.73  109.57  109.59  26067140  110.177   \n...                  ...     ...     ...     ...     ...       ...      ...   \n1143 2025-04-30 10:00:00  104.66  106.44  104.57  106.01  26312649  105.777   \n1144 2025-04-30 11:00:00  105.98  106.90  105.96  106.62  16812502  106.431   \n1145 2025-04-30 12:00:00  106.62  106.91  105.75  106.36  15269561  106.284   \n1146 2025-04-30 13:00:00  106.36  107.27  105.64  107.05  15263431  106.546   \n1147 2025-04-30 14:00:00  107.06  107.10  106.89  106.95   1066544  106.988   \n\n      barCount  trd_prd  \n0       155058  2024.09  \n1       225773  2024.09  \n2       130388  2024.09  \n3        93029  2024.09  \n4        73159  2024.09  \n...        ...      ...  \n1143     95291  2025.04  \n1144     59417  2025.04  \n1145     52468  2025.04  \n1146     48563  2025.04  \n1147      3603  2025.04  \n\n[1148 rows x 9 columns], 'CAT':                timestamp    open    high     low   close  volume      wap  \\\n0    2024-09-03 09:30:00  352.21  352.63  344.64  345.93  269621  347.946   \n1    2024-09-03 10:00:00  345.49  345.89  338.97  340.12  388757  340.563   \n2    2024-09-03 11:00:00  340.20  342.23  340.02  341.45  101078  341.505   \n3    2024-09-03 12:00:00  341.47  341.97  340.32  340.57  144511  341.010   \n4    2024-09-03 13:00:00  340.57  341.32  339.88  340.29  124432  340.680   \n...                  ...     ...     ...     ...     ...     ...      ...   \n1143 2025-04-30 10:00:00  304.57  309.00  304.01  306.05  318755  307.033   \n1144 2025-04-30 11:00:00  306.16  307.00  303.66  306.42  244570  305.313   \n1145 2025-04-30 12:00:00  306.44  306.63  302.51  303.84   90413  304.470   \n1146 2025-04-30 13:00:00  303.93  304.22  302.17  303.74   95321  303.466   \n1147 2025-04-30 14:00:00  303.75  303.81  303.16  303.57    9218  303.498   \n\n      barCount  trd_prd  \n0         1298  2024.09  \n1         2309  2024.09  \n2          816  2024.09  \n3         1086  2024.09  \n4          826  2024.09  \n...        ...      ...  \n1143      2456  2025.04  \n1144      1957  2025.04  \n1145       678  2025.04  \n1146       661  2025.04  \n1147        66  2025.04  \n\n[1148 rows x 9 columns], 'HD':                timestamp    open    high     low   close  volume      wap  \\\n0    2024-09-03 09:30:00  367.90  369.38  366.27  368.37  165031  368.111   \n1    2024-09-03 10:00:00  368.31  368.32  365.50  367.21  111703  366.627   \n2    2024-09-03 11:00:00  367.18  368.62  366.82  367.15  109320  367.601   \n3    2024-09-03 12:00:00  367.00  367.37  364.58  364.84   92013  365.837   \n4    2024-09-03 13:00:00  364.87  366.31  364.58  365.51   68224  365.594   \n...                  ...     ...     ...     ...     ...     ...      ...   \n1143 2025-04-30 10:00:00  353.53  355.33  352.90  354.99  224198  354.027   \n1144 2025-04-30 11:00:00  355.08  356.91  354.92  356.79  116986  356.126   \n1145 2025-04-30 12:00:00  356.79  357.34  355.65  356.80   65225  356.619   \n1146 2025-04-30 13:00:00  356.92  358.14  355.40  357.88   67468  357.062   \n1147 2025-04-30 14:00:00  357.88  357.89  357.40  357.69   13722  357.616   \n\n      barCount  trd_prd  \n0          826  2024.09  \n1          830  2024.09  \n2          760  2024.09  \n3          752  2024.09  \n4          558  2024.09  \n...        ...      ...  \n1143      1834  2025.04  \n1144       928  2025.04  \n1145       515  2025.04  \n1146       513  2025.04  \n1147       117  2025.04  \n\n[1148 rows x 9 columns], 'AMZN':                timestamp    open    high     low   close   volume      wap  \\\n0    2024-09-03 09:30:00  177.55  178.26  176.17  177.69  4431652  177.340   \n1    2024-09-03 10:00:00  177.67  177.69  175.56  175.98  4589648  176.547   \n2    2024-09-03 11:00:00  176.02  176.93  175.26  175.52  2549826  176.267   \n3    2024-09-03 12:00:00  175.52  176.41  175.45  176.27  2109854  175.957   \n4    2024-09-03 13:00:00  176.27  176.88  176.17  176.20  2037978  176.456   \n...                  ...     ...     ...     ...     ...      ...      ...   \n1143 2025-04-30 10:00:00  179.36  181.50  178.85  180.89  5716264  180.295   \n1144 2025-04-30 11:00:00  180.89  182.14  180.87  181.84  2659589  181.756   \n1145 2025-04-30 12:00:00  181.83  182.01  180.61  181.42  1951918  181.318   \n1146 2025-04-30 13:00:00  181.44  182.25  180.48  181.90  2113121  181.542   \n1147 2025-04-30 14:00:00  181.90  181.96  181.68  181.88   179070  181.803   \n\n      barCount  trd_prd  \n0        15598  2024.09  \n1        21850  2024.09  \n2        11884  2024.09  \n3        10689  2024.09  \n4        10220  2024.09  \n...        ...      ...  \n1143     31331  2025.04  \n1144     15302  2025.04  \n1145     11404  2025.04  \n1146     11022  2025.04  \n1147       992  2025.04  \n\n[1148 rows x 9 columns]}\n{'AAPL':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.247372  0.255151  0.247372  0.252611       1  0.255   \n1    2024-07-08  0.251865  0.261834  0.251865  0.253897       1  0.262   \n2    2024-07-09  0.253373  0.258707  0.250643  0.250658       1  0.259   \n3    2024-07-10  0.251468  0.257961  0.250912  0.257199       1  0.258   \n4    2024-07-11  0.257786  0.263596  0.255183  0.260485       1  0.264   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.385544  0.385544  0.359129  0.362018       1  0.386   \n202  2025-04-25  0.359637  0.361558  0.331587  0.339905       1  0.362   \n203  2025-04-28  0.333396  0.352763  0.330333  0.336222       1  0.353   \n204  2025-04-29  0.335889  0.345636  0.324792  0.328317       1  0.346   \n205  2025-04-30  0.328190  0.366733  0.328190  0.335397       1  0.367   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'MSFT':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.238657  0.248071  0.238657  0.247118       1  0.248   \n1    2024-07-08  0.244531  0.254119  0.244531  0.248928       1  0.254   \n2    2024-07-09  0.249071  0.252786  0.247007  0.252087       1  0.253   \n3    2024-07-10  0.252230  0.255246  0.249246  0.254389       1  0.255   \n4    2024-07-11  0.252373  0.265200  0.250262  0.260263       1  0.265   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.338397  0.338397  0.318681  0.321237       1  0.338   \n202  2025-04-25  0.319141  0.319141  0.301838  0.304251       1  0.319   \n203  2025-04-28  0.296822  0.320125  0.296822  0.310617       1  0.320   \n204  2025-04-29  0.310394  0.313458  0.300631  0.306219       1  0.313   \n205  2025-04-30  0.306410  0.338175  0.306410  0.311188       1  0.338   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'JPM':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.204591  0.211861  0.204591  0.210067       1  0.212   \n1    2024-07-08  0.206178  0.215941  0.206178  0.209099       1  0.216   \n2    2024-07-09  0.209337  0.214750  0.205861  0.210210       1  0.215   \n3    2024-07-10  0.210845  0.213099  0.206115  0.212957       1  0.213   \n4    2024-07-11  0.214068  0.216100  0.209813  0.211004       1  0.216   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.305235  0.305235  0.276312  0.277423       1  0.305   \n202  2025-04-25  0.279106  0.282947  0.265612  0.267708       1  0.283   \n203  2025-04-28  0.262961  0.278836  0.262088  0.263136       1  0.279   \n204  2025-04-29  0.262612  0.267422  0.250214  0.253611       1  0.267   \n205  2025-04-30  0.254738  0.297282  0.254738  0.266882       1  0.297   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'XOM':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.200098  0.206242  0.200003  0.202511       1  0.206   \n1    2024-07-08  0.203511  0.211956  0.200908  0.208766       1  0.212   \n2    2024-07-09  0.207559  0.211718  0.206765  0.208972       1  0.212   \n3    2024-07-10  0.209417  0.216671  0.203019  0.209051       1  0.217   \n4    2024-07-11  0.209464  0.212496  0.203448  0.209671       1  0.212   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.324491  0.324491  0.296060  0.296568       1  0.324   \n202  2025-04-25  0.295694  0.303219  0.281646  0.281646       1  0.303   \n203  2025-04-28  0.274867  0.291900  0.271645  0.279471       1  0.292   \n204  2025-04-29  0.279963  0.287535  0.264279  0.270010       1  0.288   \n205  2025-04-30  0.268851  0.318030  0.268851  0.305267       1  0.318   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'JNJ':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.165841  0.177445  0.165841  0.170968       1  0.177   \n1    2024-07-08  0.169762  0.180049  0.169762  0.178874       1  0.180   \n2    2024-07-09  0.180747  0.184954  0.178842  0.182319       1  0.185   \n3    2024-07-10  0.177382  0.189272  0.177382  0.185446       1  0.189   \n4    2024-07-11  0.185430  0.189542  0.177715  0.178763       1  0.190   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.200924  0.205003  0.193494  0.194526       1  0.205   \n202  2025-04-25  0.197320  0.209988  0.186160  0.201479       1  0.210   \n203  2025-04-28  0.197066  0.202067  0.189748  0.190272       1  0.202   \n204  2025-04-29  0.190034  0.195955  0.177937  0.180366       1  0.196   \n205  2025-04-30  0.183033  0.194590  0.173318  0.178699       1  0.195   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'PG':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.154110  0.162698  0.150887  0.159634       1  0.163   \n1    2024-07-08  0.157396  0.169667  0.157396  0.166746       1  0.170   \n2    2024-07-09  0.167524  0.169825  0.162793  0.169825       1  0.170   \n3    2024-07-10  0.171842  0.171842  0.160856  0.168968       1  0.172   \n4    2024-07-11  0.164412  0.176128  0.163904  0.175032       1  0.176   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.260421  0.260421  0.197463  0.208782       1  0.260   \n202  2025-04-25  0.218528  0.218528  0.184652  0.187653       1  0.219   \n203  2025-04-28  0.188224  0.204353  0.188224  0.194812       1  0.204   \n204  2025-04-29  0.197495  0.202067  0.184128  0.185033       1  0.202   \n205  2025-04-30  0.189256  0.216878  0.182970  0.184430       1  0.217   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'NVDA':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.459615  0.481442  0.459615  0.464186       1  0.481   \n1    2024-07-08  0.468917  0.490856  0.468917  0.475045       1  0.491   \n2    2024-07-09  0.473537  0.481156  0.472219  0.472330       1  0.481   \n3    2024-07-10  0.471425  0.479077  0.462313  0.467187       1  0.479   \n4    2024-07-11  0.467441  0.497459  0.467441  0.494586       1  0.497   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.500793  0.500793  0.477172  0.477172       1  0.501   \n202  2025-04-25  0.484776  0.489903  0.465964  0.476553       1  0.490   \n203  2025-04-28  0.496507  0.546194  0.496507  0.529701       1  0.546   \n204  2025-04-29  0.533368  0.545019  0.522049  0.526700       1  0.545   \n205  2025-04-30  0.532161  0.582690  0.532161  0.548798       1  0.583   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'CAT':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.229164  0.239308  0.229164  0.232958       1  0.239   \n1    2024-07-08  0.252976  0.264326  0.252976  0.263866       1  0.264   \n2    2024-07-09  0.268597  0.277836  0.266025  0.277217       1  0.278   \n3    2024-07-10  0.280455  0.291519  0.280455  0.290615       1  0.292   \n4    2024-07-11  0.286757  0.295425  0.286757  0.289234       1  0.295   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.366542  0.366542  0.350954  0.352906       1  0.367   \n202  2025-04-25  0.351366  0.359812  0.345874  0.352668       1  0.360   \n203  2025-04-28  0.345286  0.371225  0.345286  0.358478       1  0.371   \n204  2025-04-29  0.357256  0.360875  0.340826  0.346080       1  0.361   \n205  2025-04-30  0.345810  0.345810  0.295059  0.295059       1  0.346   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'HD':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.195510  0.202352  0.195510  0.200320       1  0.202   \n1    2024-07-08  0.201479  0.207972  0.201479  0.204892       1  0.208   \n2    2024-07-09  0.204194  0.210639  0.203067  0.208480       1  0.211   \n3    2024-07-10  0.207353  0.214782  0.202844  0.213607       1  0.215   \n4    2024-07-11  0.213369  0.216989  0.209369  0.209496       1  0.217   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.326078  0.331666  0.307696  0.309870       1  0.332   \n202  2025-04-25  0.307188  0.315236  0.300314  0.303870       1  0.315   \n203  2025-04-28  0.295599  0.308966  0.286487  0.296790       1  0.309   \n204  2025-04-29  0.296472  0.305029  0.283423  0.285662       1  0.305   \n205  2025-04-30  0.308426  0.319062  0.289392  0.289392       1  0.319   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns], 'AMZN':       timestamp      open      high       low     close  volume    wap  \\\n0    2024-07-05  0.383084  0.390497  0.371479  0.372257       1  0.390   \n1    2024-07-08  0.368035  0.391354  0.368035  0.382607       1  0.391   \n2    2024-07-09  0.383274  0.385290  0.376686  0.377321       1  0.385   \n3    2024-07-10  0.378385  0.386782  0.378385  0.382988       1  0.387   \n4    2024-07-11  0.383480  0.392862  0.377670  0.383782       1  0.393   \n..          ...       ...       ...       ...       ...     ...    ...   \n201  2025-04-24  0.451519  0.452090  0.427437  0.431929       1  0.452   \n202  2025-04-25  0.431580  0.431580  0.406514  0.408562       1  0.432   \n203  2025-04-28  0.402165  0.429024  0.402165  0.414595       1  0.429   \n204  2025-04-29  0.413753  0.434200  0.405959  0.410340       1  0.434   \n205  2025-04-30  0.410404  0.455043  0.410404  0.427691       1  0.455   \n\n     barCount  trd_prd  \n0           0  2024.07  \n1           0  2024.07  \n2           0  2024.07  \n3           0  2024.07  \n4           0  2024.07  \n..        ...      ...  \n201         0  2025.04  \n202         0  2025.04  \n203         0  2025.04  \n204         0  2025.04  \n205         0  2025.04  \n\n[206 rows x 9 columns]}\n\n\n\n10-2Yr Yield Spread\n\nYYYY = [2024, 2025]\nURL_lst = ['https://home.treasury.gov/resource-center/data-chart-center/interest-rates/TextView?type=' + 'daily_treasury_yield_curve&field_tdr_date_value=' + str(year) for year in YYYY]\n\ndf_yield_curve = pd.DataFrame()\nfor URL in URL_lst:\n    cmt_rates_page = requests.get(URL)\n\n    soup = BeautifulSoup(cmt_rates_page.content, 'html.parser')\n\n    table_html = soup.findAll('table', {'class': 'views-table'})\n\n    df = pd.read_html(io.StringIO(str(table_html)))[0]\n    df.Date = pd.to_datetime(df.Date)\n    # usdt_3mo_cmt = df.rename(columns={'3 Mo': '3_mo'})\n    df_yield_curve = pd.concat([df_yield_curve, df])\n\ndf_yield_curve = df_yield_curve[['Date', '2 Mo', '3 Mo', '4 Mo', '6 Mo', '1 Yr', '2 Yr', '3 Yr', '5 Yr', '7 Yr', '10 Yr', '20 Yr', '30 Yr']]\ndf_yield_curve\n\n\n\n\n\n\n\n\nDate\n2 Mo\n3 Mo\n4 Mo\n6 Mo\n1 Yr\n2 Yr\n3 Yr\n5 Yr\n7 Yr\n10 Yr\n20 Yr\n30 Yr\n\n\n\n\n0\n2024-01-02\n5.54\n5.46\n5.41\n5.24\n4.80\n4.33\n4.09\n3.93\n3.95\n3.95\n4.25\n4.08\n\n\n1\n2024-01-03\n5.54\n5.48\n5.41\n5.25\n4.81\n4.33\n4.07\n3.90\n3.92\n3.91\n4.21\n4.05\n\n\n2\n2024-01-04\n5.48\n5.48\n5.41\n5.25\n4.85\n4.38\n4.14\n3.97\n3.99\n3.99\n4.30\n4.13\n\n\n3\n2024-01-05\n5.48\n5.47\n5.41\n5.24\n4.84\n4.40\n4.17\n4.02\n4.04\n4.05\n4.37\n4.21\n\n\n4\n2024-01-08\n5.48\n5.49\n5.39\n5.24\n4.82\n4.36\n4.11\n3.97\n3.99\n4.01\n4.33\n4.17\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n76\n2025-04-23\n4.34\n4.33\n4.33\n4.22\n4.01\n3.81\n3.87\n4.00\n4.20\n4.40\n4.86\n4.83\n\n\n77\n2025-04-24\n4.37\n4.32\n4.32\n4.22\n3.97\n3.77\n3.80\n3.91\n4.11\n4.32\n4.79\n4.77\n\n\n78\n2025-04-25\n4.36\n4.32\n4.32\n4.22\n3.95\n3.74\n3.76\n3.88\n4.06\n4.29\n4.75\n4.74\n\n\n79\n2025-04-28\n4.37\n4.32\n4.32\n4.22\n3.92\n3.67\n3.67\n3.81\n4.01\n4.23\n4.71\n4.69\n\n\n80\n2025-04-29\n4.36\n4.31\n4.30\n4.20\n3.89\n3.65\n3.65\n3.77\n3.96\n4.19\n4.66\n4.64\n\n\n\n\n331 rows Ã— 13 columns\n\n\n\n\ndf_yield_spread = df_yield_curve.copy()\ndf_yield_spread['yield_spread'] = df_yield_spread.apply(lambda x: x['10 Yr']-x['2 Yr'], axis=1)\ndf_yield_spread = df_yield_spread[['Date', 'yield_spread']]\nprint(df_yield_spread)\n\n         Date  yield_spread\n0  2024-01-02         -0.38\n1  2024-01-03         -0.42\n2  2024-01-04         -0.39\n3  2024-01-05         -0.35\n4  2024-01-08         -0.35\n..        ...           ...\n76 2025-04-23          0.59\n77 2025-04-24          0.55\n78 2025-04-25          0.55\n79 2025-04-28          0.56\n80 2025-04-29          0.54\n\n[331 rows x 2 columns]\n\n\n\n\nCalculate Indicators and Scores\n\ndef calculate_ema(prices, period=20):\n    return prices.ewm(span=period, adjust=False).mean()\n\n\ndef calculate_macd(prices, fast=12, slow=26, signal=9):\n    ema_fast = prices.ewm(span=fast, adjust=False).mean()\n    ema_slow = prices.ewm(span=slow, adjust=False).mean()\n    macd_line = ema_fast - ema_slow\n    signal_line = macd_line.ewm(span=signal, adjust=False).mean()\n    macd_diff = macd_line - signal_line\n    return macd_diff\n\n\ndef calculate_adx(high, low, close, period=14):\n    # Calculate True Range\n    tr1 = abs(high - low)\n    tr2 = abs(high - close.shift(1))\n    tr3 = abs(low - close.shift(1))\n    tr = pd.concat([tr1, tr2, tr3], axis=1).max(axis=1)\n    atr = tr.rolling(window=period).mean()\n\n    # Calculate Plus Directional Movement (+DM) and Minus Directional Movement (-DM)\n    plus_dm = high - high.shift(1)\n    minus_dm = low.shift(1) - low\n    plus_dm[plus_dm &lt; 0] = 0\n    minus_dm[minus_dm &lt; 0] = 0\n\n    # Condition when both +DM and -DM are greater than 0\n    condition = (plus_dm &gt; 0) & (minus_dm &gt; 0)\n    plus_dm[condition & (plus_dm &lt; minus_dm)] = 0\n    minus_dm[condition & (minus_dm &lt; plus_dm)] = 0\n\n    # Calculate Smoothed +DM and -DM\n    smoothed_plus_dm = plus_dm.rolling(window=period).sum()\n    smoothed_minus_dm = minus_dm.rolling(window=period).sum()\n\n    # Calculate Smoothed TR\n    smoothed_tr = atr * period\n\n    # Calculate Plus Directional Indicator (+DI) and Minus Directional Indicator (-DI)\n    plus_di = 100 * (smoothed_plus_dm / smoothed_tr)\n    minus_di = 100 * (smoothed_minus_dm / smoothed_tr)\n\n    # Calculate Directional Movement Index (DX)\n    dx = 100 * (abs(plus_di - minus_di) / (plus_di + minus_di))\n\n    # Calculate Average Directional Index (ADX)\n    adx = dx.rolling(window=period).mean()\n\n    return adx\n\n\ndef calculate_atr(high, low, close, period=14):\n    tr1 = high - low\n    tr2 = abs(high - close.shift(1))\n    tr3 = abs(low - close.shift(1))\n    tr = pd.concat([tr1, tr2, tr3], axis=1).max(axis=1)\n    atr = tr.rolling(window=period).mean()\n    return atr\n\n\ndef calculate_iv_percentile(iv_series):\n    percentile = (iv_series.rank(pct=True) * 100).iloc[-1]\n    return percentile\n\n\ndef calculate_ema_score(price, ema20):\n    delta = 100 * (price - ema20) / ema20\n\n    # Calculate scores based on delta\n    long_score = 0\n    short_score = 0\n\n    # Long score calculation\n    if delta &lt; -5:\n        long_score = 5\n    elif -5 &lt;= delta &lt; -3:\n        long_score = 4\n    elif -3 &lt;= delta &lt; -1:\n        long_score = 3\n    elif -1 &lt;= delta &lt; 0:\n        long_score = 2\n\n    # Short score calculation\n    if delta &gt; 5:\n        short_score = 5\n    elif 3 &lt; delta &lt;= 5:\n        short_score = 4\n    elif 1 &lt; delta &lt;= 3:\n        short_score = 3\n    elif 0 &lt; delta &lt;= 1:\n        short_score = 2\n\n    return long_score, short_score\n\n\ndef calculate_macd_score(macd_diff):\n    long_score = 0\n    short_score = 0\n\n    # Long score calculation\n    if macd_diff &lt; -1.5:\n        long_score = 5\n    elif -1.5 &lt;= macd_diff &lt; -1:\n        long_score = 4\n    elif -1 &lt;= macd_diff &lt; -0.5:\n        long_score = 3\n    elif -0.5 &lt;= macd_diff &lt; -0.1:\n        long_score = 2\n    elif -0.1 &lt;= macd_diff &lt; 0:\n        long_score = 1\n\n    # Short score calculation\n    if macd_diff &gt; 1.5:\n        short_score = 5\n    elif 1 &lt;= macd_diff &lt;= 1.5:\n        short_score = 4\n    elif 0.5 &lt;= macd_diff &lt; 1:\n        short_score = 3\n    elif 0.1 &lt;= macd_diff &lt; 0.5:\n        short_score = 2\n    elif 0 &lt;= macd_diff &lt; 0.1:\n        short_score = 1\n\n    return long_score, short_score\n\n\ndef calculate_adx_score(adx):\n    if adx &lt;= 15:\n        return 0\n    elif 15 &lt; adx &lt;= 20:\n        return 2\n    elif 20 &lt; adx &lt;= 30:\n        return 5\n    elif 30 &lt; adx &lt;= 40:\n        return 2\n    else:  # adx &gt; 40\n        return 0\n\n\ndef calculate_atr_score(atr):\n    if atr &gt; 30:\n        return 0\n    elif 20 &lt; atr &lt;= 30:\n        return 2\n    elif 10 &lt; atr &lt;= 20:\n        return 5\n    elif 5 &lt; atr &lt;= 10:\n        return 4\n    else:  # atr &lt; 5\n        return 2\n\n\ndef calculate_iv_score(iv_percentile):\n    long_score = 0\n    short_score = 0\n\n    if iv_percentile &lt; 10:\n        long_score = 5\n        short_score = 0\n    elif 10 &lt;= iv_percentile &lt; 30:\n        long_score = 4\n        short_score = 1\n    elif 30 &lt;= iv_percentile &lt; 70:\n        long_score = 2\n        short_score = 2\n    elif 70 &lt;= iv_percentile &lt; 90:\n        long_score = 1\n        short_score = 4\n    else:  # iv_percentile &gt;= 90\n        long_score = 0\n        short_score = 5\n\n    return long_score, short_score\n\n\ndef calculate_yield_spread_score(yield_spread):\n    long_score = 0\n    short_score = 0\n\n    if yield_spread &gt; 1.5:\n        long_score = 5\n        short_score = 0\n    elif 0.5 &lt; yield_spread &lt;= 1.5:\n        long_score = 4\n        short_score = 1\n    elif -0.5 &lt;= yield_spread &lt;= 0.5:\n        long_score = 2\n        short_score = 2\n    elif -1.5 &lt;= yield_spread &lt; -0.5:\n        long_score = 1\n        short_score = 4\n    else:  # yield_spread &lt; -1.5\n        long_score = 0\n        short_score = 5\n\n    return long_score, short_score\n\n\ndef calculate_total_score(ema_long, ema_short, macd_long, macd_short, adx, atr, iv_long, iv_short, yield_long, yield_short):\n    long_score = .25 * ema_long + .25 * macd_long + .1 * adx + .1 * atr + .15 * iv_long + .15 * yield_long\n    short_score = .25 * ema_short + .25 * macd_short + .1 * adx + .1 * atr + .15 * iv_short + .15 * yield_short\n\n    if long_score &gt; short_score:\n        return long_score, 'LONG'\n    else:\n        return -1*short_score, 'SHORT'\n\n\n\nVisualization\n\ndef plot_performance(ledger):\n    plt.figure(figsize=(14, 7))\n    plt.plot(ledger.index, ledger['Market Value'], label='End of Day Portfolio Market Value')\n    plt.title('End of Day Portfolio Market Value Over Time')\n    plt.xlabel('Date')\n    plt.ylabel('Value ($)')\n    plt.legend()\n    plt.grid(True)\n    plt.xticks(rotation=45)\n    plt.tight_layout()\n    plt.show()\n\n\n\nBacktest Strategy Function\n\ndef backtest_strategy(daily_data_dict, hourly_data_dict, daily_iv_dict, df_yield_spread, asset_symbols, initial_capital=1_000_000, control_lever = False):\n    # Ensure timestamps in df_yield_spread are in datetime format\n    df_yield_spread['Date'] = pd.to_datetime(df_yield_spread['Date'])\n\n    # Create asset blotters\n    asset_blotter_dict = {}\n    for asset in asset_symbols:\n        blotter = pd.DataFrame(\n            data={\n                'entry_timestamp': None,\n                'qty': 0,\n                'exit_timestamp': None,\n                'entry_price': None,\n                'exit_price': None,\n                'success': pd.NA\n            },\n            index=daily_data_dict[asset]['trd_prd'].unique()[2:]\n        )\n        asset_blotter_dict[asset] = blotter\n\n    # Create portfolio blotter for rebalancing weights\n    portfolio_periods = daily_data_dict[asset_symbols[0]]['trd_prd'].unique()[2:]\n    print(f\"backtest periods: {portfolio_periods}\")\n    portfolio_blotter_col = [f\"{asset} weight\" for asset in asset_symbols] +\\\n        [f\"{asset} entry timestamp\" for asset in asset_symbols] +\\\n        [f\"{asset} exit timestamp\" for asset in asset_symbols] +\\\n        [f\"{asset} entry price\" for asset in asset_symbols] +\\\n        [f\"{asset} exit price\" for asset in asset_symbols]\n    portfolio_blotter = pd.DataFrame(index=portfolio_periods, columns=portfolio_blotter_col)\n    portfolio_blotter.index.name = 'trd_prd'\n\n    # Get all unique dates from the daily data for the ledger\n    all_dates = []\n    for asset in asset_symbols:\n        # Ensure timestamp column is datetime\n        daily_data_dict[asset]['timestamp'] = pd.to_datetime(daily_data_dict[asset]['timestamp'])\n        # Extract dates\n        portfolio_dates = daily_data_dict[asset][daily_data_dict[asset]['trd_prd']&gt;=portfolio_periods[0]]['timestamp']\n        all_dates.extend(portfolio_dates.dt.date.tolist())\n    all_dates = sorted(list(set(all_dates)))\n\n    # Create portfolio ledger with date index\n    ledger_columns = ['Cash']\n    for asset in asset_symbols:\n        ledger_columns.append(f\"{asset} Qty\")\n    for asset in asset_symbols:\n        ledger_columns.append(f\"{asset} Close\")\n    ledger_columns.extend(['Portfolio Value', 'Market Value'])\n\n    ledger = pd.DataFrame(index=all_dates, columns=ledger_columns)\n    ledger.index.name = 'Date'\n    ledger['Cash'] = initial_capital\n    for asset in asset_symbols:\n        ledger[f\"{asset} Qty\"] = 0\n\n    # Fill initial prices in ledger\n    for date in all_dates:\n        for asset in asset_symbols:\n            mask = daily_data_dict[asset]['timestamp'].dt.date == date\n            if mask.any():\n                price_row = daily_data_dict[asset][mask]\n                if not price_row.empty:\n                    ledger.loc[date, f\"{asset} Close\"] = price_row['close'].values[0]\n\n    # Process each trading period\n    for period_idx, period in enumerate(portfolio_periods):\n        # Get previous period for calculations\n        prev_period = daily_data_dict[asset_symbols[0]]['trd_prd'].unique()[period_idx+1]\n        prev_2_period = daily_data_dict[asset_symbols[0]]['trd_prd'].unique()[period_idx]\n        print(f\"Processing period: {period:.2f} Previous period: {prev_period:.2f}, Previous 2 period: {prev_2_period:.2f}\")\n\n        # Calculate indicators and weights for each asset\n        asset_scores = {}\n        total_score = 0\n\n        for asset in asset_symbols:\n            # Get data for previous period\n            prev_data = daily_data_dict[asset][daily_data_dict[asset]['trd_prd'] &lt;= prev_period]\n            last_data = daily_data_dict[asset][daily_data_dict[asset]['trd_prd'] == prev_period]\n            vol = last_data['close'].std()/100\n\n            if prev_data.empty:\n                continue\n\n            # Calculate indicators\n            last_close = prev_data['close'].iloc[-1]\n\n            # EMA indicator\n            ema20 = calculate_ema(prev_data['close'], 20).iloc[-1]\n            ema_long, ema_short = calculate_ema_score(last_close, ema20)\n\n            # MACD indicator\n            macd_diff = calculate_macd(prev_data['close'], fast = 11, slow = 44, signal = 22).iloc[-1]\n            macd_long, macd_short = calculate_macd_score(macd_diff)\n\n            # ADX indicator\n            adx = calculate_adx(prev_data['high'], prev_data['low'], prev_data['close'], period = 11).iloc[-1]\n            adx_score = calculate_adx_score(adx)\n\n            # ATR indicator\n            atr = calculate_atr(prev_data['high'], prev_data['low'], prev_data['close'], period = 11).iloc[-1]\n            atr_score = calculate_atr_score(atr)\n\n            # IV indicator\n            iv_window = daily_iv_dict[asset][\n                (daily_iv_dict[asset]['trd_prd'] &gt;= prev_2_period) &\n                (daily_iv_dict[asset]['trd_prd'] &lt;= period)\n            ]['close'].dropna()\n\n\n            iv_percentile = calculate_iv_percentile(iv_window)\n            iv_long, iv_short = calculate_iv_score(iv_percentile)\n\n            # Yield spread indicator\n            # Use timestamp directly for comparison with datetime Series\n            last_timestamp = prev_data['timestamp'].iloc[-1]\n            yield_date_mask = df_yield_spread['Date'] &lt;= last_timestamp\n\n            if yield_date_mask.any():\n                last_yield_date = df_yield_spread.loc[yield_date_mask, 'Date'].iloc[-1]\n                yield_spread = df_yield_spread[df_yield_spread['Date'] == last_yield_date]['yield_spread'].values[0]\n                yield_long, yield_short = calculate_yield_spread_score(yield_spread)\n            else:\n                yield_long, yield_short = 0, 0\n\n            # Calculate total score and direction\n            score, direction = calculate_total_score(\n                ema_long, ema_short, macd_long, macd_short, adx_score, atr_score,\n                iv_long, iv_short, yield_long, yield_short\n            )\n\n\n            # Store score, direction and ATR for stop loss/take profit\n            asset_scores[asset] = {\n                'score': score,\n                'direction': direction,\n                'atr': atr\n            }\n\n            total_score += score\n        if control_lever:\n            MAX_GROSS_LEVERAGE = 1.5 # maximum leverage (long + short)\n            MAX_SINGLE_WEIGHT = 0.2 # upper limit of single equity weight\n\n            long_group = {a: s['score'] for a, s in asset_scores.items() if s['score'] &gt; 0}\n            short_group = {a: -s['score'] for a, s in asset_scores.items() if s['score'] &lt; 0}\n\n            sum_long = sum(long_group.values())\n            sum_short = sum(short_group.values())\n\n            weights = {}\n            # Independently Normalize:\n            # long positions account for 60% of the total leverage\n            # short positions account for 40% of the total leverage\n            if sum_long &gt; 0:\n                for a in long_group:\n                    weights[a] = (long_group[a] / sum_long) * (MAX_GROSS_LEVERAGE * 0.6)\n\n            if sum_short &gt; 0:\n                for a in short_group:\n                    weights[a] = -(short_group[a] / sum_short) * (MAX_GROSS_LEVERAGE * 0.4)\n\n            # limit the maximum weight of a single stock.\n            for a in weights:\n                weights[a] = max(min(weights[a], MAX_SINGLE_WEIGHT), -MAX_SINGLE_WEIGHT)\n\n            # re-adjust to restore the total leverage to 1.0\n            gross = sum(abs(w) for w in weights.values())\n            if gross &gt; 1.0:\n                weights = {a: w / gross for a, w in weights.items()}\n\n        else:\n            # Calculate weights\n            weights = {}\n            for asset in asset_scores:\n                weight = asset_scores[asset]['score'] / abs(total_score)\n\n                weights[asset] = weight\n\n        for asset in asset_symbols:\n            portfolio_blotter.loc[period, f'{asset} weight'] = weights.get(asset, 0.0)\n\n        # Get first trading day of the period for each asset\n        for asset in asset_symbols:\n            if asset not in weights or asset not in asset_scores:\n                continue\n\n            # Get first trading day of the period\n            period_daily_data = daily_data_dict[asset][daily_data_dict[asset]['trd_prd'] == period]\n            period_hourly_data = hourly_data_dict[asset][hourly_data_dict[asset]['trd_prd'] == period]\n\n            if period_daily_data.empty:\n                continue\n\n            entry_timestamp = period_hourly_data['timestamp'].iloc[0]\n            entry_date = entry_timestamp.date()\n            entry_price = period_daily_data['open'].iloc[0]\n\n            # Get current portfolio value\n            mask = [d &lt;= entry_date for d in ledger.index]\n            if any(mask):\n                last_market_value = ledger.loc[mask, 'Market Value'].iloc[-1]\n                if pd.isna(last_market_value):\n                    # Use initial capital if no market value available yet\n                    last_market_value = initial_capital\n            else:\n                last_market_value = initial_capital\n\n            # Calculate target position\n            target_value = weights[asset] * last_market_value\n            target_qty = int(target_value / entry_price)\n\n            # Update asset blotter\n            asset_blotter_dict[asset].loc[period, 'entry_timestamp'] = entry_timestamp\n            portfolio_blotter.loc[period, f'{asset} entry timestamp'] = entry_timestamp\n            asset_blotter_dict[asset].loc[period, 'entry_price'] = entry_price\n            portfolio_blotter.loc[period, f'{asset} entry price'] = entry_price\n            asset_blotter_dict[asset].loc[period, 'qty'] = target_qty\n\n            ledger_dates_entry = [d for d in ledger.index if d &gt;= entry_date]\n            ledger.loc[ledger_dates_entry, f\"{asset} Qty\"] = target_qty\n\n            ledger.loc[ledger_dates_entry, 'Cash'] -= target_qty * entry_price\n\n\n\n            # Process stop loss/take profit for this asset\n            # Ensure hourly data timestamp is datetime\n            hourly_data_dict[asset]['timestamp'] = pd.to_datetime(hourly_data_dict[asset]['timestamp'])\n            period_hourly_data = hourly_data_dict[asset][hourly_data_dict[asset]['trd_prd'] == period]\n\n            direction = asset_scores[asset]['direction']\n\n            # Define stop loss/take profit levels\n            if direction == 'LONG':\n                stop_loss_level = entry_price * (1- vol)\n                take_profit_level = entry_price * (1 + vol)\n            else:  # SHORT\n                stop_loss_level = entry_price * (1 +  vol)\n                take_profit_level = entry_price* (1 -  vol)\n\n            # Check for stop loss/take profit triggers\n            exit_triggered = False\n            exit_timestamp = None\n            exit_price = None\n\n            for _, row in period_hourly_data.iterrows():\n                if direction == 'LONG':\n                    # Check for take profit\n                    if row['close'] &gt;= take_profit_level:\n                        exit_triggered = True\n                        exit_timestamp = row['timestamp']\n                        exit_price = row['close']\n                        break\n                    # Check for stop loss\n                    elif row['close'] &lt;= stop_loss_level:\n                        exit_triggered = True\n                        exit_timestamp = row['timestamp']\n                        exit_price = row['close']\n                        break\n                else:  # SHORT\n                    # Check for take profit\n                    if row['close'] &lt;= take_profit_level:\n                        exit_triggered = True\n                        exit_timestamp = row['timestamp']\n                        exit_price = row['close']\n                        break\n                    # Check for stop loss\n                    elif row['close'] &gt;= stop_loss_level:\n                        exit_triggered = True\n                        exit_timestamp = row['timestamp']\n                        exit_price = row['close']\n                        break\n\n            # If no exit triggered, use the last day of the period\n            if not exit_triggered and not period_daily_data.empty:\n                exit_timestamp = period_daily_data['timestamp'].iloc[-1]\n                exit_price = period_daily_data['close'].iloc[-1]\n\n            # Update asset blotter with exit information\n            if exit_timestamp is not None and exit_price is not None:\n                asset_blotter_dict[asset].loc[period, 'exit_timestamp'] = exit_timestamp\n                portfolio_blotter.loc[period, f'{asset} exit timestamp'] = exit_timestamp\n                asset_blotter_dict[asset].loc[period, 'exit_price'] = exit_price\n                portfolio_blotter.loc[period, f'{asset} exit price'] = exit_price\n\n                # Determine if trade was successful\n                if direction == 'LONG':\n                    success = exit_price &gt; entry_price\n                else:  # SHORT\n                    success = exit_price &lt; entry_price\n                asset_blotter_dict[asset].loc[period, 'success'] = success\n\n                # Update ledger for exit\n                exit_date = exit_timestamp.date()\n\n                # set the position quantity to 0 for all subsequent dates\n                ledger_dates_exit = [d for d in ledger.index if d &gt;= exit_date]\n                ledger.loc[ledger_dates_exit, f\"{asset} Qty\"] = 0\n\n                ledger.loc[ledger_dates_exit, 'Cash'] += target_qty * exit_price\n        ledger = ledger.ffill()\n\n    ledger['Cash'] = ledger['Cash'].ffill()\n\n    for date in ledger.index:\n        portfolio_value = 0\n        for asset in asset_symbols:\n            qty = ledger.loc[date, f\"{asset} Qty\"]\n            price = ledger.loc[date, f\"{asset} Close\"]\n            if not pd.isna(qty) and not pd.isna(price):\n                portfolio_value += qty * price\n\n        ledger.loc[date, 'Portfolio Value'] = portfolio_value\n        ledger.loc[date, 'Market Value'] = ledger.loc[date, 'Cash'] + portfolio_value\n    return asset_blotter_dict, portfolio_blotter, ledger\n\n\n\nImplement Startegy\n\n# Main execution\nimport warnings\nwarnings.filterwarnings('ignore')\nasset_blotter_dict_original, portfolio_blotter_original, ledger_original = backtest_strategy(\n    daily_data_dict, hourly_data_dict, daily_iv_dict, df_yield_spread, asset_symbols\n)\n\n# Plot performance\nprint(\"=================== original (without controling lever) ===================\")\nplot_performance(ledger_original)\n\n\n# # Print summary\n# print(\"\\nPortfolio Blotter (Target Weights):\")\n# print(portfolio_blotter_original.head())\n#\n# print(\"\\nSample Asset Blotter (AAPL):\")\n# print(asset_blotter_dict_original['AAPL'].head())\n#\n# print(\"\\nLedger Sample:\")\n# print(ledger_original.head())\n#\n# print(\"\\nFinal Portfolio Value:\", ledger_original['Market Value'].iloc[-1])\n#\nportfolio_blotter_original.to_csv('blotter_original.csv')\nledger_original.to_csv('ledger_original.csv')\n\nbacktest periods: [2024.11 2024.12 2025.01 2025.02 2025.03 2025.04]\nProcessing period: 2024.11 Previous period: 2024.10, Previous 2 period: 2024.09\nProcessing period: 2024.12 Previous period: 2024.11, Previous 2 period: 2024.10\nProcessing period: 2025.01 Previous period: 2024.12, Previous 2 period: 2024.11\nProcessing period: 2025.02 Previous period: 2025.01, Previous 2 period: 2024.12\nProcessing period: 2025.03 Previous period: 2025.02, Previous 2 period: 2025.01\nProcessing period: 2025.04 Previous period: 2025.03, Previous 2 period: 2025.02\n=================== original (without controling lever) ===================\n\n\n\n\n\n\n\n\n\n\nportfolio_blotter_original\n# portfolio_blotter_original.sum(axis=1)\n\n\n\n\n\n\n\n\nAAPL weight\nMSFT weight\nJPM weight\nXOM weight\nJNJ weight\nPG weight\nNVDA weight\nCAT weight\nHD weight\nAMZN weight\n...\nAAPL exit price\nMSFT exit price\nJPM exit price\nXOM exit price\nJNJ exit price\nPG exit price\nNVDA exit price\nCAT exit price\nHD exit price\nAMZN exit price\n\n\ntrd_prd\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2024.11\n0.106719\n0.124506\n-0.088933\n0.118577\n0.098814\n0.13834\n0.098814\n0.156126\n0.144269\n0.102767\n...\n227.2\n421.9\n240.47\n116.29\n156.11\n160.32\n138.77\n409.22\n382.4\n205.57\n\n\n2024.12\n-0.186246\n-0.140401\n-0.191977\n0.143266\n-0.106017\n-0.200573\n0.183381\n-0.186246\n-0.186246\n-0.12894\n...\n250.14\n443.94\n234.0\n111.69\n146.64\n169.56\n146.08\n385.24\n397.82\n221.54\n\n\n2025.01\n-0.126949\n0.144766\n0.113586\n0.124722\n0.091314\n0.113586\n0.142539\n0.144766\n0.131403\n0.120267\n...\n234.89\n415.06\n256.01\n106.83\n154.01\n157.79\n143.93\n386.36\n416.46\n235.07\n\n\n2025.02\n0.239583\n0.354167\n-0.348958\n-0.213542\n-0.3125\n-0.239583\n0.385417\n-0.244792\n-0.286458\n-0.333333\n...\n247.02\n396.99\n264.65\n111.33\n163.25\n173.84\n124.05\n343.95\n396.6\n215.77\n\n\n2025.03\n-0.522936\n0.53211\n0.477064\n-0.422018\n-0.559633\n-0.633028\n0.550459\n0.495413\n0.541284\n0.541284\n...\n216.1\n375.39\n234.95\n118.93\n165.84\n170.42\n110.84\n329.8\n354.79\n191.09\n\n\n2025.04\n0.228311\n0.214612\n-0.136986\n-0.305936\n0.182648\n0.210046\n0.30137\n-0.200913\n0.178082\n0.328767\n...\n204.36\n353.35\n227.65\n113.16\n148.41\n160.57\n102.78\n309.2\n339.6\n197.12\n\n\n\n\n6 rows Ã— 50 columns\n\n\n\n\nledger_original\n\n\n\n\n\n\n\n\nCash\nAAPL Qty\nMSFT Qty\nJPM Qty\nXOM Qty\nJNJ Qty\nPG Qty\nNVDA Qty\nCAT Qty\nHD Qty\n...\nJPM Close\nXOM Close\nJNJ Close\nPG Close\nNVDA Close\nCAT Close\nHD Close\nAMZN Close\nPortfolio Value\nMarket Value\n\n\nDate\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2024-11-01\n116385.68\n482\n304\n-397\n0\n615\n836\n733\n412\n365\n...\n222.94\n114.95\n160.13\n165.10\n135.40\n379.63\n392.59\n197.93\n881274.46\n997660.14\n\n\n2024-11-04\n116385.68\n482\n304\n-397\n0\n615\n836\n733\n412\n365\n...\n219.78\n118.61\n158.24\n165.08\n136.05\n376.52\n395.57\n195.78\n879508.90\n995894.58\n\n\n2024-11-05\n218104.09\n482\n304\n-397\n0\n615\n836\n0\n412\n365\n...\n221.49\n118.96\n158.35\n165.76\n139.91\n383.37\n400.09\n199.50\n787739.11\n1005843.20\n\n\n2024-11-06\n670913.78\n482\n304\n0\n0\n615\n0\n0\n0\n0\n...\n247.06\n121.00\n157.88\n161.05\n145.61\n416.88\n388.37\n207.09\n332181.96\n1003095.74\n\n\n2024-11-07\n908681.78\n0\n0\n0\n0\n615\n0\n0\n0\n0\n...\n236.38\n121.15\n156.73\n163.41\n148.88\n408.21\n399.44\n210.05\n96388.95\n1005070.73\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n2025-04-24\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n244.64\n108.63\n154.93\n159.53\n106.43\n306.86\n359.64\n186.54\n0.00\n833245.71\n\n\n2025-04-25\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n243.55\n108.57\n154.58\n161.02\n111.01\n306.45\n357.58\n188.99\n0.00\n833245.71\n\n\n2025-04-28\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n243.22\n108.63\n155.35\n161.85\n108.73\n307.06\n356.92\n187.70\n0.00\n833245.71\n\n\n2025-04-29\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n244.62\n108.36\n155.91\n162.26\n109.02\n307.40\n359.00\n187.39\n0.00\n833245.71\n\n\n2025-04-30\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n242.25\n105.04\n155.81\n161.97\n106.95\n303.57\n357.69\n181.88\n0.00\n833245.71\n\n\n\n\n122 rows Ã— 23 columns\n\n\n\n\n\nAfter Controlling Lever\n\nasset_blotter_dict_ctrl_lever, portfolio_blotter_ctrl_lever, ledger_ctrl_lever = backtest_strategy(\n    daily_data_dict, hourly_data_dict, daily_iv_dict, df_yield_spread, asset_symbols, control_lever = True\n)\n\nprint(\"=================== (after controling lever) ===================\")\n\n# Plot performance\nplot_performance(ledger_ctrl_lever)\n# Print summary\nprint(\"\\nPortfolio Blotter (Target Weights):\")\nprint(portfolio_blotter_ctrl_lever.head())\n\nprint(\"\\nSample Asset Blotter (AAPL):\")\nprint(asset_blotter_dict_ctrl_lever['AAPL'].head())\n\nprint(\"\\nLedger Sample:\")\nprint(ledger_ctrl_lever.head())\n\nprint(\"\\nFinal Portfolio Value:\", ledger_ctrl_lever['Market Value'].iloc[-1])\n\nportfolio_blotter_ctrl_lever.to_csv('blotter_ctrl_lever.csv')\nledger_ctrl_lever.to_csv('ledger_ctrl_lever.csv')\n\nbacktest periods: [2024.11 2024.12 2025.01 2025.02 2025.03 2025.04]\nProcessing period: 2024.11 Previous period: 2024.10, Previous 2 period: 2024.09\nProcessing period: 2024.12 Previous period: 2024.11, Previous 2 period: 2024.10\nProcessing period: 2025.01 Previous period: 2024.12, Previous 2 period: 2024.11\nProcessing period: 2025.02 Previous period: 2025.01, Previous 2 period: 2024.12\nProcessing period: 2025.03 Previous period: 2025.02, Previous 2 period: 2025.01\nProcessing period: 2025.04 Previous period: 2025.03, Previous 2 period: 2025.02\n=================== (after controling lever) ===================\n\n\n\n\n\n\n\n\n\n\nPortfolio Blotter (Target Weights):\n        AAPL weight MSFT weight JPM weight XOM weight JNJ weight PG weight  \\\ntrd_prd                                                                      \n2024.11    0.080185    0.093549  -0.181818   0.089094   0.074245  0.103943   \n2024.12   -0.084233   -0.063499  -0.086825        0.2  -0.047948 -0.090713   \n2025.01   -0.181818    0.105102   0.082465    0.09055   0.066295  0.082465   \n2025.02    0.166667    0.166667  -0.088158  -0.053947  -0.078947 -0.060526   \n2025.03   -0.097854    0.101754   0.091228   -0.07897  -0.104721 -0.118455   \n\n        NVDA weight CAT weight HD weight AMZN weight  ... AAPL exit price  \\\ntrd_prd                                               ...                   \n2024.11    0.074245   0.117307  0.108398    0.077215  ...           227.2   \n2024.12         0.2  -0.084233 -0.084233   -0.058315  ...          250.14   \n2025.01    0.103485   0.105102  0.095401    0.087316  ...          234.89   \n2025.02    0.166667  -0.061842 -0.072368   -0.084211  ...          247.02   \n2025.03    0.105263   0.094737  0.103509    0.103509  ...           216.1   \n\n        MSFT exit price JPM exit price XOM exit price JNJ exit price  \\\ntrd_prd                                                                \n2024.11           421.9         240.47         116.29         156.11   \n2024.12          443.94          234.0         111.69         146.64   \n2025.01          415.06         256.01         106.83         154.01   \n2025.02          396.99         264.65         111.33         163.25   \n2025.03          375.39         234.95         118.93         165.84   \n\n        PG exit price NVDA exit price CAT exit price HD exit price  \\\ntrd_prd                                                              \n2024.11        160.32          138.77         409.22         382.4   \n2024.12        169.56          146.08         385.24        397.82   \n2025.01        157.79          143.93         386.36        416.46   \n2025.02        173.84          124.05         343.95         396.6   \n2025.03        170.42          110.84          329.8        354.79   \n\n        AMZN exit price  \ntrd_prd                  \n2024.11          205.57  \n2024.12          221.54  \n2025.01          235.07  \n2025.02          215.77  \n2025.03          191.09  \n\n[5 rows x 50 columns]\n\nSample Asset Blotter (AAPL):\n             entry_timestamp  qty       exit_timestamp entry_price exit_price  \\\n2024.11  2024-11-01 09:30:00  362  2024-11-07 12:00:00       221.0      227.2   \n2024.12  2024-12-02 09:30:00 -355  2024-12-11 10:00:00      237.27     250.14   \n2025.01  2025-01-02 09:30:00 -730  2025-01-10 11:00:00      248.93     234.89   \n2025.02  2025-02-03 09:30:00  724  2025-02-21 11:00:00      229.99     247.02   \n2025.03  2025-03-03 09:30:00 -404  2025-03-12 10:00:00      241.81      216.1   \n\n        success  \n2024.11    True  \n2024.12   False  \n2025.01    True  \n2025.02    True  \n2025.03    True  \n\nLedger Sample:\n                 Cash  AAPL Qty  MSFT Qty  JPM Qty  XOM Qty  JNJ Qty  PG Qty  \\\nDate                                                                           \n2024-11-01  451235.76       362       228     -813        0      462     628   \n2024-11-04  451235.76       362       228     -813        0      462     628   \n2024-11-05  527698.03       362       228     -813        0      462     628   \n2024-11-06  744273.84       362       228        0        0      462       0   \n2024-11-07  922713.44         0         0        0        0      462       0   \n\n            NVDA Qty  CAT Qty  HD Qty  ...  JPM Close  XOM Close  JNJ Close  \\\nDate                                   ...                                    \n2024-11-01       551      310     274  ...     222.94     114.95     160.13   \n2024-11-04       551      310     274  ...     219.78     118.61     158.24   \n2024-11-05         0      310     274  ...     221.49     118.96     158.35   \n2024-11-06         0        0       0  ...     247.06     121.00     157.88   \n2024-11-07         0        0       0  ...     236.38     121.15     156.73   \n\n            PG Close  NVDA Close  CAT Close  HD Close  AMZN Close  \\\nDate                                                                \n2024-11-01    165.10      135.40     379.63    392.59      197.93   \n2024-11-04    165.08      136.05     376.52    395.57      195.78   \n2024-11-05    165.76      139.91     383.37    400.09      199.50   \n2024-11-06    161.05      145.61     416.88    388.37      207.09   \n2024-11-07    163.41      148.88     408.21    399.44      210.05   \n\n            Portfolio Value  Market Value  \nDate                                       \n2024-11-01        547327.62     998563.38  \n2024-11-04        547626.05     998861.81  \n2024-11-05        477760.75    1005458.78  \n2024-11-06        249366.24     993640.08  \n2024-11-07         72409.26     995122.70  \n\n[5 rows x 23 columns]\n\nFinal Portfolio Value: 1007410.8000000009\n\n\n\nportfolio_blotter_ctrl_lever\n# portfolio_blotter_ctrl_lever.sum(axis=1)\n\n\n\n\n\n\n\n\nAAPL weight\nMSFT weight\nJPM weight\nXOM weight\nJNJ weight\nPG weight\nNVDA weight\nCAT weight\nHD weight\nAMZN weight\n...\nAAPL exit price\nMSFT exit price\nJPM exit price\nXOM exit price\nJNJ exit price\nPG exit price\nNVDA exit price\nCAT exit price\nHD exit price\nAMZN exit price\n\n\ntrd_prd\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2024.11\n0.080185\n0.093549\n-0.181818\n0.089094\n0.074245\n0.103943\n0.074245\n0.117307\n0.108398\n0.077215\n...\n227.2\n421.9\n240.47\n116.29\n156.11\n160.32\n138.77\n409.22\n382.4\n205.57\n\n\n2024.12\n-0.084233\n-0.063499\n-0.086825\n0.2\n-0.047948\n-0.090713\n0.2\n-0.084233\n-0.084233\n-0.058315\n...\n250.14\n443.94\n234.0\n111.69\n146.64\n169.56\n146.08\n385.24\n397.82\n221.54\n\n\n2025.01\n-0.181818\n0.105102\n0.082465\n0.09055\n0.066295\n0.082465\n0.103485\n0.105102\n0.095401\n0.087316\n...\n234.89\n415.06\n256.01\n106.83\n154.01\n157.79\n143.93\n386.36\n416.46\n235.07\n\n\n2025.02\n0.166667\n0.166667\n-0.088158\n-0.053947\n-0.078947\n-0.060526\n0.166667\n-0.061842\n-0.072368\n-0.084211\n...\n247.02\n396.99\n264.65\n111.33\n163.25\n173.84\n124.05\n343.95\n396.6\n215.77\n\n\n2025.03\n-0.097854\n0.101754\n0.091228\n-0.07897\n-0.104721\n-0.118455\n0.105263\n0.094737\n0.103509\n0.103509\n...\n216.1\n375.39\n234.95\n118.93\n165.84\n170.42\n110.84\n329.8\n354.79\n191.09\n\n\n2025.04\n0.088346\n0.083045\n-0.090226\n-0.141353\n0.070677\n0.081278\n0.116617\n-0.132331\n0.06891\n0.127218\n...\n204.36\n353.35\n227.65\n113.16\n148.41\n160.57\n102.78\n309.2\n339.6\n197.12\n\n\n\n\n6 rows Ã— 50 columns\n\n\n\n\nledger_ctrl_lever\n\n\n\n\n\n\n\n\nCash\nAAPL Qty\nMSFT Qty\nJPM Qty\nXOM Qty\nJNJ Qty\nPG Qty\nNVDA Qty\nCAT Qty\nHD Qty\n...\nJPM Close\nXOM Close\nJNJ Close\nPG Close\nNVDA Close\nCAT Close\nHD Close\nAMZN Close\nPortfolio Value\nMarket Value\n\n\nDate\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2024-11-01\n451235.76\n362\n228\n-813\n0\n462\n628\n551\n310\n274\n...\n222.94\n114.95\n160.13\n165.10\n135.40\n379.63\n392.59\n197.93\n547327.62\n998563.38\n\n\n2024-11-04\n451235.76\n362\n228\n-813\n0\n462\n628\n551\n310\n274\n...\n219.78\n118.61\n158.24\n165.08\n136.05\n376.52\n395.57\n195.78\n547626.05\n998861.81\n\n\n2024-11-05\n527698.03\n362\n228\n-813\n0\n462\n628\n0\n310\n274\n...\n221.49\n118.96\n158.35\n165.76\n139.91\n383.37\n400.09\n199.50\n477760.75\n1005458.78\n\n\n2024-11-06\n744273.84\n362\n228\n0\n0\n462\n0\n0\n0\n0\n...\n247.06\n121.00\n157.88\n161.05\n145.61\n416.88\n388.37\n207.09\n249366.24\n993640.08\n\n\n2024-11-07\n922713.44\n0\n0\n0\n0\n462\n0\n0\n0\n0\n...\n236.38\n121.15\n156.73\n163.41\n148.88\n408.21\n399.44\n210.05\n72409.26\n995122.70\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n2025-04-24\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n244.64\n108.63\n154.93\n159.53\n106.43\n306.86\n359.64\n186.54\n0.00\n1007410.80\n\n\n2025-04-25\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n243.55\n108.57\n154.58\n161.02\n111.01\n306.45\n357.58\n188.99\n0.00\n1007410.80\n\n\n2025-04-28\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n243.22\n108.63\n155.35\n161.85\n108.73\n307.06\n356.92\n187.70\n0.00\n1007410.80\n\n\n2025-04-29\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n244.62\n108.36\n155.91\n162.26\n109.02\n307.40\n359.00\n187.39\n0.00\n1007410.80\n\n\n2025-04-30\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n...\n242.25\n105.04\n155.81\n161.97\n106.95\n303.57\n357.69\n181.88\n0.00\n1007410.80\n\n\n\n\n122 rows Ã— 23 columns\n\n\n\n\n\nAnalyze\n\nbenchmark_data_daily = sb.fetch_historical_data(\n        contract=sb.Contract({\n        'symbol': \"SPX\",\n        'secType': \"IND\",\n        'exchange': \"CBOE\",\n        'currency': \"USD\"\n    }),\n        barSizeSetting=\"1 day\",\n        durationStr=\"8 M\"\n    )['hst_dta'][['timestamp', 'close']].rename(columns = {'timestamp': 'Date'})\nbenchmark_data_daily\n\n\n\n\n\n\n\n\nDate\nclose\n\n\n\n\n0\n2024-09-05\n5503.41\n\n\n1\n2024-09-06\n5408.42\n\n\n2\n2024-09-09\n5471.05\n\n\n3\n2024-09-10\n5495.52\n\n\n4\n2024-09-11\n5554.13\n\n\n...\n...\n...\n\n\n160\n2025-04-28\n5528.75\n\n\n161\n2025-04-29\n5560.83\n\n\n162\n2025-04-30\n5569.06\n\n\n163\n2025-05-01\n5604.14\n\n\n164\n2025-05-02\n5694.12\n\n\n\n\n165 rows Ã— 2 columns\n\n\n\n\nfrom sklearn.linear_model import LinearRegression\ndef performance_metrics(market_values, benchmark_values, trade_num, rf = 0.046):\n    max_drawdown = 0.0\n    peak_value = market_values.iloc[0]\n    peak_time = market_values.index[0]\n    trough_time = market_values.index[0]\n\n    for t in market_values.index:\n        value = market_values.loc[t]\n        if value &gt; peak_value:\n            peak_value = value\n            peak_time = t\n        else:\n            drawdown = (value - peak_value) / peak_value\n            if drawdown &lt; max_drawdown:\n                max_drawdown = drawdown\n                trough_time = t\n    cumulative_return = market_values.iloc[-1] / market_values.iloc[0] - 1\n\n    T_days = len(market_values)\n    annualized_return = (market_values.iloc[-1] / market_values.iloc[0]) ** (252 / T_days) - 1\n    # Geo Mean Return\n    geo_mean_return = (1 + cumulative_return) ** (252 / T_days) - 1\n    avg_return_per_trade = cumulative_return/trade_num\n\n    daily_returns = market_values.pct_change().dropna()\n    annualized_volatility = daily_returns.std() * np.sqrt(252)\n\n    sharpe_ratio = (annualized_return-rf) / annualized_volatility\n\n    max_one_day_drawdown = daily_returns.min()\n\n    running_max = market_values.cummax()\n    drawdowns = (market_values - running_max) / running_max\n\n    if market_values.index.name == 'Date':\n        market_values = market_values.reset_index()\n    market_values['daily_return'] = market_values['Market Value'].pct_change()\n    benchmark_values['benchmark_return'] = benchmark_values['close'].pct_change()\n    ab_df = market_values[['Date', 'daily_return']].merge(benchmark_values[['Date', 'benchmark_return']], on='Date').dropna()\n    # Alpha & Beta\n    model = LinearRegression().fit(\n        ab_df[[\"benchmark_return\"]],\n        ab_df[\"daily_return\"]\n    )\n    alpha = model.intercept_\n    beta = model.coef_[0]\n\n    plt.figure(figsize=(12, 5))\n    plt.plot(drawdowns, label='Max Drawdown')\n    plt.title(\"Max Drawdown Over Time\")\n    plt.ylabel(\"Drawdown\")\n    plt.xlabel(\"Date\")\n    plt.legend()\n    plt.grid(True)\n    plt.tight_layout()\n    plt.show()\n\n    plt.figure(figsize=(12, 5))\n    plt.plot(market_values, label='Market Value')\n    plt.title(\"Portfolio Market Value Over Time\")\n    plt.xlabel(\"Date\")\n    plt.ylabel(\"Market Value\")\n    plt.legend()\n    plt.grid(True)\n    plt.tight_layout()\n    plt.show()\n\n\n\n    return {\n        \"alpha\": alpha,\n        \"beta\": beta,\n        \"Cumulative Return\": [cumulative_return],\n        \"Geometric Mean Return\": [geo_mean_return],\n        \"Average Return Per Trade\": [avg_return_per_trade],\n        \"Annualized Volatility\": [annualized_volatility],\n        \"Sharpe Ratio\": [sharpe_ratio],\n        \"Max Drawdown\": [max_drawdown],\n        \"Max One-Day Drawdown\": [max_one_day_drawdown]\n    }\n\n\nprint(\"================= Performance Before Controlling Lever =================\")\nmetrics_original = performance_metrics(ledger_original['Market Value'], benchmark_values=benchmark_data_daily, trade_num = 6*10)\nmetrics_original = pd.DataFrame(metrics_original)\nprint(metrics_original)\n\nprint(\"================= Performance After Controlling Lever =================\")\nmetrics_ctrl_lever = performance_metrics(ledger_ctrl_lever['Market Value'], benchmark_values=benchmark_data_daily, trade_num = 6*10)\nmetrics_ctrl_lever  = pd.DataFrame(metrics_ctrl_lever )\nprint(metrics_ctrl_lever)\n\n================= Performance Before Controlling Lever =================\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n      alpha      beta  Cumulative Return  Geometric Mean Return  \\\n0 -0.001299  0.323833            -0.1648               -0.31063   \n\n   Average Return Per Trade  Annualized Volatility  Sharpe Ratio  \\\n0                 -0.002747               0.272792     -1.138705   \n\n   Max Drawdown  Max One-Day Drawdown  \n0     -0.266284             -0.096578  \n================= Performance After Controlling Lever =================\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n      alpha      beta  Cumulative Return  Geometric Mean Return  \\\n0  0.000089  0.062734            0.00886               0.018388   \n\n   Average Return Per Trade  Annualized Volatility  Sharpe Ratio  \\\n0                  0.000148                0.06758      0.272088   \n\n   Max Drawdown  Max One-Day Drawdown  \n0     -0.057188             -0.019307"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "AlphaSignal533",
    "section": "",
    "text": "Mean Reversion Strategy\n\n1. Strategy Overview\nThis strategy is based on mean reversion, under the assumption that prices of large-cap, liquid stocks tend to revert to their average levels. When prices deviate significantly from the mean, they are expected to revert: - Go long when prices are abnormally low and expected to rebound. - Go short when prices are abnormally high and expected to pull back.\nIn addition, we are interested in studying how leverage control affects strategy performance. Without constraint, excessive leverage may amplify returns in the short term, but it can also lead to extreme losses and unstable drawdowns, especially when signals are weak or noisy. Therefore, we compare the performance of the strategy with and without leverage control.\n\n\n\n2. Portfolio Choice\nWe selected these 10 stocks for their strong sector representation, high liquidity, and market relevance. Each stock comes from a different major industry, ensuring diversification and reducing sector-specific risk.\n\n\n\n\n\n\n\n\n\nTicker\nIndustry\n\n\n\n\n1\nAAPL\nInformation Electronics\n\n\n2\nMSFT\nInformation Technology\n\n\n3\nJPM\nFinancial\n\n\n4\nXOM\nEnergy\n\n\n5\nJNJ\nHealthcare\n\n\n6\nPG\nConsumer Staples\n\n\n7\nNVDA\nSemiconductors\n\n\n8\nCAT\nIndustrial\n\n\n9\nHD\nRetail\n\n\n10\nAMZN\nCommunication Services\n\n\n\n\n\n\n\n\n\n\n3. Adjustment Method\n\nMonthly portfolio adjustment based on re-ranking of stocks.\nStop-loss and take-profit mechanism: Each stock position is monitored during the holding month and is closed early if either a stop-loss or take-profit threshold is reached. If no trigger is hit, the stock is force-closed at the end of the month.\n\n\n\n\n\nScoring System\n\n1. Technical Indicator Scoring System\nEach stock is scored for both long and short setups based on the following indicators:\n\n1.1 EMA Deviation (Delta) Calculation\nThe EMA deviation measures how far the current price is from its 20-day Exponential Moving Average (EMA). It is calculated as: Î” = 100% Ã— (Close âˆ’ EMAâ‚â‚‚â‚€â‚Ž) / EMAâ‚â‚‚â‚€â‚Ž\n\n\n\n\n\n\n\n\n\nÎ” Range\nShort Score\nLong Score\n\n\n\n\n1\n&gt; +5%\n5\n0\n\n\n2\n+3% â€“ +5%\n4\n0\n\n\n3\n+1% â€“ +3%\n3\n0\n\n\n4\n0 â€“ +1%\n2\n0\n\n\n5\n&lt; 0%\n0\n0\n\n\n6\n&lt; â€“5%\n0\n5\n\n\n7\nâ€“5% â€“ â€“3%\n0\n4\n\n\n8\nâ€“3% â€“ â€“1%\n0\n3\n\n\n9\nâ€“1% â€“ 0%\n0\n2\n\n\n10\n&gt; 0%\n0\n0\n\n\n\n\n\n\n\n\n\n1.2 MACD (Moving Average Convergence Divergence)\nThe MACD difference is calculated as: MACD difference = MACD line â€“ Signal line\n\n\n\n\n\n\n\n\n\nMACD_diff Range\nShort Score\nLong Score\n\n\n\n\n1\n&gt; +1.5\n5\n0\n\n\n2\n+1.0 â€“ +1.5\n4\n0\n\n\n3\n+0.5 â€“ +1.0\n3\n0\n\n\n4\n+0.1 â€“ +0.5\n2\n0\n\n\n5\n0 â€“ +0.1\n1\n0\n\n\n6\nâ€“0.1 â€“ 0\n0\n1\n\n\n7\nâ€“0.5 â€“ â€“0.1\n0\n2\n\n\n8\nâ€“1.0 â€“ â€“0.5\n0\n3\n\n\n9\nâ€“1.5 â€“ â€“1.0\n0\n4\n\n\n10\n&lt; â€“1.5\n0\n5\n\n\n\n\n\n\n\n\n\n1.3 ADX (Average Directional Index)\n\n\n\n\n\n\n\n\n\nADX Value Range\nExplanation\nScore (Both Directions)\n\n\n\n\n1\n0â€“15\nVery weak trend, sideways market\n0\n\n\n2\n15â€“20\nWeak trend, reversal possible\n2\n\n\n3\n20â€“30\nModerate trend, ideal for reversal\n5\n\n\n4\n30â€“40\nStrong trend, caution\n2\n\n\n5\n&gt; 40\nVery strong trend, high risk\n0\n\n\n\n\n\n\n\n\n\n1.4 ATR (Average True Range)\n\n\n\n\n\n\n\n\n\nATR Value Range\nExplanation\nScore (Both Directions)\n\n\n\n\n1\n&gt; 30\nExtremely high volatility, avoid trading\n0\n\n\n2\n20 â€“ 30\nHigh volatility, elevated risk\n2\n\n\n3\n10 â€“ 20\nIdeal volatility level\n5\n\n\n4\n5 â€“ 10\nModerate-low volatility, acceptable\n4\n\n\n5\n&lt; 5\nVery low volatility, may stall\n2\n\n\n\n\n\n\n\n\n\n\n2. Non-Technical Indicator Scoring System\n\n2.1 Implied Volatility\n\n\n\n\n\n\n\n\n\nIV Percentile Range\nLong Score\nShort Score\nExplanation\n\n\n\n\n1\n&lt; 10%\n5\n0\nExtremely calm, likely to rebound, long favorable\n\n\n2\n10% â€“ 30%\n4\n1\nRelatively calm, supports long\n\n\n3\n30% â€“ 70%\n2\n2\nNeutral volatility, direction uncertain\n\n\n4\n70% â€“ 90%\n1\n4\nMild panic, possible short-term drop\n\n\n5\n&gt; 90%\n0\n5\nExtreme panic, suitable for shorting\n\n\n\n\n\n\n\n\n\n2.2 10â€“2 Yield Spread\n\n\n\n\n\n\n\n\n\n10â€“2 Spread Range (%)\nLong Score\nShort Score\nExplanation\n\n\n\n\n1\n&gt; 1.5\n5\n0\nLarge spread, optimistic economy, strong rever...\n\n\n2\n0.5 â€“ 1.5\n4\n1\nMild steepness, supports long positions\n\n\n3\nâ€“0.5 â€“ 0.5\n2\n2\nNeutral curve, unclear direction\n\n\n4\nâ€“1.5 â€“ â€“0.5\n1\n4\nSignificant inversion, growing concern\n\n\n5\n&lt; â€“1.5\n0\n5\nSevere inversion, market panic, short-favoring...\n\n\n\n\n\n\n\n\n\n\n\n3. Determining Trade Direction & Weight Allocation\nFor each stock, we compute both long and short scores as weighted sums of indicator scores:\nTotal_Long  = 0.25 * EMA_long + 0.25 * MACD_long + 0.10 * ADX + 0.10 * ATR + 0.15 * IV_long + 0.15 * Yield_long\nTotal_Short = 0.25 * EMA_short + 0.25 * MACD_short + 0.10 * ADX + 0.10 * ATR + 0.15 * IV_short + 0.15 * Yield_short\nThe direction (LONG/SHORT) is determined based on which score is higher. The higher score is used to allocate capital.\n\nOption A: Without Leverage Control\n\nAll stocks are scored.\nNormalize all non-zero scores to sum to 1:\n\nweight_i = score_i / sum(|scores|)\n\nPros: Simple.\nCons: May lead to excessive total exposure, especially if all assets are scored as strong.\n\n\n\nOption B: With Leverage Control\n\nSplit stocks into long group and short group based on score sign.\nNormalize within group, then assign proportions:\n\n# Assume MAX_GROSS_LEVERAGE = 1.5, max per stock = 0.2\n# long positions account for 60% of the total leverage\nlong_weights  = score_i / sum_long * 0.6 * MAX_GROSS_LEVERAGE\n# short positions account for 40% of the total leverage\nshort_weights = score_i / sum_short * 0.4 * MAX_GROSS_LEVERAGE\n\nCap each stock to Â±0.2 and re-normalize total exposure to 1.0\nPros: Controlled leverage, avoids overweight.\nCons: More complex.\n\n\n\n\n\n4. Execution\n\nEntry is performed at the first hourly timestamp of the period.\nStop-loss and take-profit are set at dynamic thresholds derived from price volatility: entry_price*(1Â±vol_last_month).\nIf either threshold is hit intra-month, the position is closed early. Otherwise, all positions are force-closed at month end.\n\n\nThis strategy allows for clear comparison between raw signal-driven allocation and a risk-controlled variant, helping evaluate the cost and benefit of leverage in short-horizon mean reversion trading.\n\n\n\nStrategy Outcome\nThe strategy produces a blotter and ledger to record all trade signals and executed positions based on the computed indicator scores.\nBelow is a placeholder for the interactive portfolio visualization. It will display results such as:\n\nCapital allocation weights (long/short)\nHistorical position tracking\nCumulative return curve\n\n\nBlotter\n\nOriginal(without controlling lever)\n\n\n\n\n\n\n\ntrd_prd\nAAPL weight\nMSFT weight\nJPM weight\nXOM weight\nJNJ weight\nPG weight\nNVDA weight\nCAT weight\nHD weight\nAMZN weight\nAAPL entry timestamp\nMSFT entry timestamp\nJPM entry timestamp\nXOM entry timestamp\nJNJ entry timestamp\nPG entry timestamp\nNVDA entry timestamp\nCAT entry timestamp\nHD entry timestamp\nAMZN entry timestamp\nAAPL exit timestamp\nMSFT exit timestamp\nJPM exit timestamp\nXOM exit timestamp\nJNJ exit timestamp\nPG exit timestamp\nNVDA exit timestamp\nCAT exit timestamp\nHD exit timestamp\nAMZN exit timestamp\nAAPL entry price\nMSFT entry price\nJPM entry price\nXOM entry price\nJNJ entry price\nPG entry price\nNVDA entry price\nCAT entry price\nHD entry price\nAMZN entry price\nAAPL exit price\nMSFT exit price\nJPM exit price\nXOM exit price\nJNJ exit price\nPG exit price\nNVDA exit price\nCAT exit price\nHD exit price\nAMZN exit price\n\n\n\n\n2024.11\n0.106719\n0.124506\n-0.088933\n0.118577\n0.098814\n0.138340\n0.098814\n0.156126\n0.144269\n0.102767\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-07 12:00:00\n2024-11-07 09:30:00\n2024-11-06 09:30:00\n2024-11-01 12:00:00\n2024-11-08 12:00:00\n2024-11-06 11:00:00\n2024-11-05 09:30:00\n2024-11-06 09:30:00\n2024-11-06 10:00:00\n2024-11-06 11:00:00\n221.00\n409.00\n223.56\n119.65\n160.58\n165.31\n134.70\n378.07\n394.80\n198.88\n227.20\n421.90\n240.47\n116.29\n156.11\n160.32\n138.77\n409.22\n382.40\n205.57\n\n\n2024.12\n-0.186246\n-0.140401\n-0.191977\n0.143266\n-0.106017\n-0.200573\n0.183381\n-0.186246\n-0.186246\n-0.128940\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-11 10:00:00\n2024-12-05 12:00:00\n2024-12-18 14:00:00\n2024-12-11 10:00:00\n2024-12-11 15:00:00\n2024-12-18 09:30:00\n2024-12-05 11:00:00\n2024-12-12 09:30:00\n2024-12-18 14:00:00\n2024-12-05 12:00:00\n237.27\n421.57\n249.55\n118.05\n154.75\n179.12\n138.83\n407.46\n429.00\n209.90\n250.14\n443.94\n234.00\n111.69\n146.64\n169.56\n146.08\n385.24\n397.82\n221.54\n\n\n2025.01\n-0.126949\n0.144766\n0.113586\n0.124722\n0.091314\n0.113586\n0.142539\n0.144766\n0.131403\n0.120267\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-10 11:00:00\n2025-01-31 00:00:00\n2025-01-16 09:30:00\n2025-01-31 00:00:00\n2025-01-30 13:00:00\n2025-01-10 14:00:00\n2025-01-03 09:30:00\n2025-01-17 11:00:00\n2025-01-21 09:30:00\n2025-01-22 11:00:00\n248.93\n425.53\n240.92\n108.28\n145.23\n168.10\n136.00\n365.51\n392.13\n222.44\n234.89\n415.06\n256.01\n106.83\n154.01\n157.79\n143.93\n386.36\n416.46\n235.07\n\n\n2025.02\n0.239583\n0.354167\n-0.348958\n-0.213542\n-0.312500\n-0.239583\n0.385417\n-0.244792\n-0.286458\n-0.333333\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-21 11:00:00\n2025-02-28 00:00:00\n2025-02-28 00:00:00\n2025-02-28 00:00:00\n2025-02-21 14:00:00\n2025-02-28 00:00:00\n2025-02-05 11:00:00\n2025-02-28 00:00:00\n2025-02-28 00:00:00\n2025-02-21 13:00:00\n229.99\n411.68\n261.83\n106.64\n152.00\n165.47\n114.76\n364.14\n406.12\n233.94\n247.02\n396.99\n264.65\n111.33\n163.25\n173.84\n124.05\n343.95\n396.60\n215.77\n\n\n2025.03\n-0.522936\n0.532110\n0.477064\n-0.422018\n-0.559633\n-0.633028\n0.550459\n0.495413\n0.541284\n0.541284\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-12 10:00:00\n2025-03-31 00:00:00\n2025-03-10 09:30:00\n2025-03-31 00:00:00\n2025-03-31 00:00:00\n2025-03-31 00:00:00\n2025-03-06 14:00:00\n2025-03-31 00:00:00\n2025-03-13 09:30:00\n2025-03-10 10:00:00\n241.81\n398.82\n264.00\n111.70\n164.96\n173.58\n123.50\n347.63\n396.95\n213.17\n216.10\n375.39\n234.95\n118.93\n165.84\n170.42\n110.84\n329.80\n354.79\n191.09\n\n\n2025.04\n0.228311\n0.214612\n-0.136986\n-0.305936\n0.182648\n0.210046\n0.301370\n-0.200913\n0.178082\n0.328767\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-03 09:30:00\n2025-04-07 09:30:00\n2025-04-03 10:00:00\n2025-04-03 14:00:00\n2025-04-07 09:30:00\n2025-04-07 09:30:00\n2025-04-03 10:00:00\n2025-04-03 10:00:00\n2025-04-07 09:30:00\n2025-04-02 12:00:00\n219.87\n374.65\n242.62\n119.22\n160.73\n170.57\n108.52\n327.01\n364.14\n187.86\n204.36\n353.35\n227.65\n113.16\n148.41\n160.57\n102.78\n309.20\n339.60\n197.12\n\n\n\n\n\n\n\n\n\nAfter Controlling Lever\n\n\n\n\n\n\n\ntrd_prd\nAAPL weight\nMSFT weight\nJPM weight\nXOM weight\nJNJ weight\nPG weight\nNVDA weight\nCAT weight\nHD weight\nAMZN weight\nAAPL entry timestamp\nMSFT entry timestamp\nJPM entry timestamp\nXOM entry timestamp\nJNJ entry timestamp\nPG entry timestamp\nNVDA entry timestamp\nCAT entry timestamp\nHD entry timestamp\nAMZN entry timestamp\nAAPL exit timestamp\nMSFT exit timestamp\nJPM exit timestamp\nXOM exit timestamp\nJNJ exit timestamp\nPG exit timestamp\nNVDA exit timestamp\nCAT exit timestamp\nHD exit timestamp\nAMZN exit timestamp\nAAPL entry price\nMSFT entry price\nJPM entry price\nXOM entry price\nJNJ entry price\nPG entry price\nNVDA entry price\nCAT entry price\nHD entry price\nAMZN entry price\nAAPL exit price\nMSFT exit price\nJPM exit price\nXOM exit price\nJNJ exit price\nPG exit price\nNVDA exit price\nCAT exit price\nHD exit price\nAMZN exit price\n\n\n\n\n2024.11\n0.080185\n0.093549\n-0.181818\n0.089094\n0.074245\n0.103943\n0.074245\n0.117307\n0.108398\n0.077215\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-01 09:30:00\n2024-11-07 12:00:00\n2024-11-07 09:30:00\n2024-11-06 09:30:00\n2024-11-01 12:00:00\n2024-11-08 12:00:00\n2024-11-06 11:00:00\n2024-11-05 09:30:00\n2024-11-06 09:30:00\n2024-11-06 10:00:00\n2024-11-06 11:00:00\n221.00\n409.00\n223.56\n119.65\n160.58\n165.31\n134.70\n378.07\n394.80\n198.88\n227.20\n421.90\n240.47\n116.29\n156.11\n160.32\n138.77\n409.22\n382.40\n205.57\n\n\n2024.12\n-0.084233\n-0.063499\n-0.086825\n0.200000\n-0.047948\n-0.090713\n0.200000\n-0.084233\n-0.084233\n-0.058315\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-02 09:30:00\n2024-12-11 10:00:00\n2024-12-05 12:00:00\n2024-12-18 14:00:00\n2024-12-11 10:00:00\n2024-12-11 15:00:00\n2024-12-18 09:30:00\n2024-12-05 11:00:00\n2024-12-12 09:30:00\n2024-12-18 14:00:00\n2024-12-05 12:00:00\n237.27\n421.57\n249.55\n118.05\n154.75\n179.12\n138.83\n407.46\n429.00\n209.90\n250.14\n443.94\n234.00\n111.69\n146.64\n169.56\n146.08\n385.24\n397.82\n221.54\n\n\n2025.01\n-0.181818\n0.105102\n0.082465\n0.090550\n0.066295\n0.082465\n0.103485\n0.105102\n0.095401\n0.087316\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-02 09:30:00\n2025-01-10 11:00:00\n2025-01-31 00:00:00\n2025-01-16 09:30:00\n2025-01-31 00:00:00\n2025-01-30 13:00:00\n2025-01-10 14:00:00\n2025-01-03 09:30:00\n2025-01-17 11:00:00\n2025-01-21 09:30:00\n2025-01-22 11:00:00\n248.93\n425.53\n240.92\n108.28\n145.23\n168.10\n136.00\n365.51\n392.13\n222.44\n234.89\n415.06\n256.01\n106.83\n154.01\n157.79\n143.93\n386.36\n416.46\n235.07\n\n\n2025.02\n0.166667\n0.166667\n-0.088158\n-0.053947\n-0.078947\n-0.060526\n0.166667\n-0.061842\n-0.072368\n-0.084211\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-03 09:30:00\n2025-02-21 11:00:00\n2025-02-28 00:00:00\n2025-02-28 00:00:00\n2025-02-28 00:00:00\n2025-02-21 14:00:00\n2025-02-28 00:00:00\n2025-02-05 11:00:00\n2025-02-28 00:00:00\n2025-02-28 00:00:00\n2025-02-21 13:00:00\n229.99\n411.68\n261.83\n106.64\n152.00\n165.47\n114.76\n364.14\n406.12\n233.94\n247.02\n396.99\n264.65\n111.33\n163.25\n173.84\n124.05\n343.95\n396.60\n215.77\n\n\n2025.03\n-0.097854\n0.101754\n0.091228\n-0.078970\n-0.104721\n-0.118455\n0.105263\n0.094737\n0.103509\n0.103509\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-03 09:30:00\n2025-03-12 10:00:00\n2025-03-31 00:00:00\n2025-03-10 09:30:00\n2025-03-31 00:00:00\n2025-03-31 00:00:00\n2025-03-31 00:00:00\n2025-03-06 14:00:00\n2025-03-31 00:00:00\n2025-03-13 09:30:00\n2025-03-10 10:00:00\n241.81\n398.82\n264.00\n111.70\n164.96\n173.58\n123.50\n347.63\n396.95\n213.17\n216.10\n375.39\n234.95\n118.93\n165.84\n170.42\n110.84\n329.80\n354.79\n191.09\n\n\n2025.04\n0.088346\n0.083045\n-0.090226\n-0.141353\n0.070677\n0.081278\n0.116617\n-0.132331\n0.068910\n0.127218\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-01 09:30:00\n2025-04-03 09:30:00\n2025-04-07 09:30:00\n2025-04-03 10:00:00\n2025-04-03 14:00:00\n2025-04-07 09:30:00\n2025-04-07 09:30:00\n2025-04-03 10:00:00\n2025-04-03 10:00:00\n2025-04-07 09:30:00\n2025-04-02 12:00:00\n219.87\n374.65\n242.62\n119.22\n160.73\n170.57\n108.52\n327.01\n364.14\n187.86\n204.36\n353.35\n227.65\n113.16\n148.41\n160.57\n102.78\n309.20\n339.60\n197.12\n\n\n\n\n\n\n\n\n\n\nLedger\n\nOriginal(without controlling lever)\n\n\n\n\n\n\n\nDate\nCash\nAAPL Qty\nMSFT Qty\nJPM Qty\nXOM Qty\nJNJ Qty\nPG Qty\nNVDA Qty\nCAT Qty\nHD Qty\nAMZN Qty\nAAPL Close\nMSFT Close\nJPM Close\nXOM Close\nJNJ Close\nPG Close\nNVDA Close\nCAT Close\nHD Close\nAMZN Close\nPortfolio Value\nMarket Value\n\n\n\n\n2024-11-01\n116385.68\n482\n304\n-397\n0\n615\n836\n733\n412\n365\n516\n222.91\n410.37\n222.94\n114.95\n160.13\n165.10\n135.40\n379.63\n392.59\n197.93\n881274.46\n997660.14\n\n\n2024-11-04\n116385.68\n482\n304\n-397\n0\n615\n836\n733\n412\n365\n516\n222.01\n408.46\n219.78\n118.61\n158.24\n165.08\n136.05\n376.52\n395.57\n195.78\n879508.90\n995894.58\n\n\n2024-11-05\n218104.09\n482\n304\n-397\n0\n615\n836\n0\n412\n365\n516\n223.45\n411.46\n221.49\n118.96\n158.35\n165.76\n139.91\n383.37\n400.09\n199.50\n787739.11\n1005843.20\n\n\n2024-11-06\n670913.78\n482\n304\n0\n0\n615\n0\n0\n0\n0\n0\n222.72\n420.18\n247.06\n121.00\n157.88\n161.05\n145.61\n416.88\n388.37\n207.09\n332181.96\n1003095.74\n\n\n2024-11-07\n908681.78\n0\n0\n0\n0\n615\n0\n0\n0\n0\n0\n227.48\n425.43\n236.38\n121.15\n156.73\n163.41\n148.88\n408.21\n399.44\n210.05\n96388.95\n1005070.73\n\n\n2024-11-08\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n226.96\n422.54\n236.98\n121.11\n155.47\n167.71\n147.63\n393.37\n405.90\n208.18\n0.00\n1004689.43\n\n\n2024-11-11\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n224.23\n418.01\n239.29\n120.47\n155.04\n166.03\n145.26\n396.54\n408.29\n206.84\n0.00\n1004689.43\n\n\n2024-11-12\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n224.23\n423.03\n239.56\n120.35\n152.64\n165.84\n148.29\n393.01\n403.08\n208.91\n0.00\n1004689.43\n\n\n2024-11-13\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n225.12\n425.20\n241.16\n121.47\n153.24\n166.58\n146.27\n387.07\n410.19\n214.10\n0.00\n1004689.43\n\n\n2024-11-14\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.22\n426.89\n241.87\n120.56\n151.87\n167.08\n146.76\n387.36\n405.72\n211.48\n0.00\n1004689.43\n\n\n2024-11-15\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n225.00\n415.00\n245.31\n119.31\n154.00\n169.54\n141.98\n384.07\n408.18\n202.61\n0.00\n1004689.43\n\n\n2024-11-18\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.02\n415.76\n245.03\n120.31\n154.77\n170.75\n140.15\n384.46\n410.44\n201.70\n0.00\n1004689.43\n\n\n2024-11-19\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.28\n417.79\n243.09\n118.63\n153.00\n170.76\n147.01\n382.33\n406.80\n204.61\n0.00\n1004689.43\n\n\n2024-11-20\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n229.00\n415.49\n240.78\n120.32\n153.11\n170.89\n145.89\n381.50\n400.00\n202.88\n0.00\n1004689.43\n\n\n2024-11-21\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.52\n412.87\n244.76\n121.93\n155.50\n172.75\n146.67\n389.59\n410.45\n198.38\n0.00\n1004689.43\n\n\n2024-11-22\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n229.87\n417.00\n248.55\n121.79\n155.17\n176.28\n141.95\n397.49\n420.00\n197.12\n0.00\n1004689.43\n\n\n2024-11-25\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n232.87\n418.79\n250.29\n119.97\n155.78\n177.39\n136.02\n405.65\n428.67\n201.45\n0.00\n1004689.43\n\n\n2024-11-26\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n235.06\n427.99\n249.97\n117.97\n154.52\n179.31\n136.92\n407.83\n429.52\n207.86\n0.00\n1004689.43\n\n\n2024-11-27\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n234.93\n422.99\n249.79\n117.66\n155.40\n179.36\n135.34\n403.70\n427.19\n205.74\n0.00\n1004689.43\n\n\n2024-11-29\n1004689.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n237.33\n423.46\n249.72\n117.96\n155.01\n179.26\n138.25\n406.11\n429.13\n207.89\n0.00\n1004689.43\n\n\n2024-12-02\n2004258.47\n-784\n-333\n-769\n1213\n-685\n-1119\n1320\n-457\n-434\n-614\n239.59\n430.98\n246.25\n117.85\n154.80\n179.70\n138.63\n402.51\n426.96\n210.71\n-1000523.45\n1003735.02\n\n\n2024-12-03\n2004258.47\n-784\n-333\n-769\n1213\n-685\n-1119\n1320\n-457\n-434\n-614\n242.65\n431.20\n244.82\n117.67\n152.36\n175.42\n140.26\n399.26\n429.35\n213.44\n-994730.33\n1009528.14\n\n\n2024-12-04\n2004258.47\n-784\n-333\n-769\n1213\n-685\n-1119\n1320\n-457\n-434\n-614\n243.01\n437.42\n243.40\n114.28\n150.47\n175.11\n145.14\n399.51\n427.92\n218.16\n-994412.49\n1009845.98\n\n\n2024-12-05\n1913226.49\n-784\n0\n-769\n1213\n-685\n-1119\n0\n-457\n-434\n0\n243.04\n442.62\n245.48\n114.78\n149.52\n176.03\n145.06\n394.98\n426.54\n220.55\n-905112.33\n1008114.16\n\n\n2024-12-06\n1913226.49\n-784\n0\n-769\n1213\n-685\n-1119\n0\n-457\n-434\n0\n242.84\n443.57\n247.36\n113.57\n149.31\n173.82\n142.44\n395.03\n431.37\n227.03\n-907371.21\n1005855.28\n\n\n2024-12-09\n1913226.49\n-784\n0\n-769\n1213\n-685\n-1119\n0\n-457\n-434\n0\n246.75\n446.02\n243.81\n112.90\n149.60\n170.79\n138.81\n399.26\n429.18\n226.09\n-906310.14\n1006916.35\n\n\n2024-12-10\n1913226.49\n-784\n0\n-769\n1213\n-685\n-1119\n0\n-457\n-434\n0\n247.77\n443.33\n242.86\n112.67\n149.23\n172.28\n135.07\n388.39\n422.59\n225.04\n-900244.47\n1012982.02\n\n\n2024-12-11\n1752148.30\n0\n0\n-769\n0\n0\n-1119\n0\n-457\n-434\n0\n246.49\n448.99\n243.53\n111.92\n146.64\n170.63\n139.31\n388.87\n421.38\n230.26\n-738802.05\n1013346.25\n\n\n2024-12-12\n1576093.62\n0\n0\n-769\n0\n0\n-1119\n0\n0\n-434\n0\n247.96\n449.56\n241.53\n111.82\n146.24\n170.85\n137.34\n380.78\n414.42\n228.97\n-556776.00\n1019317.62\n\n\n2024-12-13\n1576093.62\n0\n0\n-769\n0\n0\n-1119\n0\n0\n-434\n0\n248.13\n447.27\n239.94\n110.84\n146.62\n171.06\n134.25\n380.51\n416.98\n227.46\n-556899.32\n1019194.30\n\n\n2024-12-16\n1576093.62\n0\n0\n-769\n0\n0\n-1119\n0\n0\n-434\n0\n251.04\n451.59\n239.58\n108.47\n143.85\n171.14\n132.00\n378.92\n410.71\n232.93\n-553990.82\n1022102.80\n\n\n2024-12-17\n1576093.62\n0\n0\n-769\n0\n0\n-1119\n0\n0\n-434\n0\n253.48\n454.46\n238.36\n108.01\n146.41\n170.33\n130.39\n375.80\n408.47\n231.15\n-551174.09\n1024919.53\n\n\n2024-12-18\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n248.05\n437.39\n230.37\n106.42\n144.75\n169.08\n128.91\n363.89\n393.82\n220.52\n0.00\n1033756.10\n\n\n2024-12-19\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n249.79\n437.03\n232.96\n105.51\n143.58\n169.19\n130.68\n360.37\n385.02\n223.29\n0.00\n1033756.10\n\n\n2024-12-20\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n254.49\n436.60\n237.60\n105.87\n144.47\n168.06\n134.70\n366.04\n392.60\n224.92\n0.00\n1033756.10\n\n\n2024-12-23\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n255.27\n435.25\n238.39\n106.30\n145.27\n168.11\n139.67\n365.39\n392.45\n225.06\n0.00\n1033756.10\n\n\n2024-12-24\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n258.20\n439.33\n242.31\n106.40\n145.85\n168.94\n140.22\n367.57\n396.14\n229.05\n0.00\n1033756.10\n\n\n2024-12-26\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n259.02\n438.11\n243.14\n106.49\n145.58\n170.16\n139.93\n367.12\n395.14\n227.05\n0.00\n1033756.10\n\n\n2024-12-27\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n255.59\n430.53\n241.17\n106.48\n145.05\n169.53\n137.01\n364.86\n392.86\n223.75\n0.00\n1033756.10\n\n\n2024-12-30\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n252.20\n424.83\n239.32\n105.76\n143.34\n167.09\n137.49\n363.01\n389.43\n221.30\n0.00\n1033756.10\n\n\n2024-12-31\n1033756.10\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n250.42\n421.50\n239.71\n107.57\n144.62\n167.65\n134.29\n362.76\n388.99\n219.39\n0.00\n1033756.10\n\n\n2025-01-02\n34254.62\n-509\n340\n471\n1151\n628\n675\n1048\n396\n335\n540\n243.85\n418.58\n240.00\n107.31\n144.02\n165.98\n138.31\n359.77\n388.46\n220.22\n993703.12\n1027957.74\n\n\n2025-01-03\n185093.26\n-509\n340\n471\n1151\n628\n675\n0\n396\n335\n540\n243.36\n423.35\n243.28\n107.86\n144.19\n165.13\n144.47\n363.79\n389.18\n224.19\n856313.31\n1041406.57\n\n\n2025-01-06\n185093.26\n-509\n340\n471\n1151\n628\n675\n0\n396\n335\n540\n245.00\n427.85\n240.85\n107.74\n143.66\n160.60\n149.43\n364.20\n389.37\n227.61\n854408.12\n1039501.38\n\n\n2025-01-07\n185093.26\n-509\n340\n471\n1151\n628\n675\n0\n396\n335\n540\n242.21\n422.37\n243.17\n108.75\n146.23\n161.30\n140.14\n363.00\n384.23\n222.11\n853139.62\n1038232.88\n\n\n2025-01-08\n185093.26\n-509\n340\n471\n1151\n628\n675\n0\n396\n335\n540\n242.70\n424.56\n243.13\n106.93\n142.27\n162.10\n140.11\n361.07\n387.20\n222.13\n849815.74\n1034909.00\n\n\n2025-01-10\n172042.50\n0\n340\n471\n1151\n628\n0\n0\n396\n335\n540\n236.85\n418.95\n239.87\n106.54\n142.06\n158.56\n135.91\n351.00\n389.89\n218.94\n855099.74\n1027142.24\n\n\n2025-01-13\n172042.50\n0\n340\n471\n1151\n628\n0\n0\n396\n335\n540\n234.40\n417.19\n244.21\n109.29\n144.47\n158.84\n133.23\n362.50\n389.18\n218.46\n865281.16\n1037323.66\n\n\n2025-01-14\n172042.50\n0\n340\n471\n1151\n628\n0\n0\n396\n335\n540\n233.28\n415.67\n247.47\n109.72\n144.75\n159.74\n131.76\n371.57\n392.78\n217.76\n871390.31\n1043432.81\n\n\n2025-01-15\n172042.50\n0\n340\n471\n1151\n628\n0\n0\n396\n335\n540\n237.87\n426.31\n252.35\n111.51\n144.97\n159.65\n136.24\n374.89\n406.09\n223.35\n888297.01\n1060339.51\n\n\n2025-01-16\n292623.21\n0\n340\n0\n1151\n628\n0\n0\n396\n335\n540\n228.26\n424.58\n254.27\n111.32\n147.77\n160.50\n133.57\n380.55\n409.33\n220.66\n772265.83\n1064889.04\n\n\n2025-01-17\n445621.77\n0\n340\n0\n1151\n628\n0\n0\n0\n335\n540\n229.98\n429.03\n259.16\n112.32\n147.03\n161.13\n137.71\n386.02\n409.38\n225.94\n626635.26\n1072257.03\n\n\n2025-01-21\n585135.87\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n540\n222.64\n428.50\n263.03\n111.47\n148.15\n161.72\n140.83\n398.36\n418.43\n230.71\n491613.57\n1076749.44\n\n\n2025-01-22\n712073.67\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n0\n223.83\n446.20\n262.84\n109.53\n145.27\n164.74\n147.07\n397.61\n410.10\n235.01\n369006.59\n1081080.26\n\n\n2025-01-23\n712073.67\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n0\n223.66\n446.71\n265.95\n110.15\n146.64\n166.15\n147.22\n406.40\n414.39\n235.42\n370753.97\n1082827.64\n\n\n2025-01-24\n712073.67\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n0\n222.78\n444.06\n264.84\n108.66\n146.82\n164.12\n142.62\n407.63\n414.50\n234.85\n368251.02\n1080324.69\n\n\n2025-01-27\n712073.67\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n0\n229.86\n434.56\n265.85\n110.17\n152.89\n169.66\n118.42\n394.98\n424.87\n235.42\n370570.99\n1082644.66\n\n\n2025-01-28\n712073.67\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n0\n238.26\n447.20\n267.14\n108.04\n150.38\n166.19\n128.99\n390.29\n418.83\n238.15\n370840.68\n1082914.35\n\n\n2025-01-29\n712073.67\n0\n340\n0\n1151\n628\n0\n0\n0\n0\n0\n239.36\n442.33\n266.58\n108.67\n151.15\n166.23\n123.70\n393.23\n413.42\n237.07\n370393.57\n1082467.24\n\n\n2025-01-30\n808791.95\n0\n340\n0\n1151\n0\n0\n0\n0\n0\n0\n237.59\n414.99\n268.23\n109.57\n152.87\n167.41\n124.65\n374.98\n414.50\n234.64\n267211.67\n1076003.62\n\n\n2025-01-31\n1072873.68\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n236.00\n415.06\n267.30\n106.83\n152.15\n165.99\n120.07\n371.44\n411.98\n237.68\n0.00\n1072873.68\n\n\n2025-02-03\n2072238.38\n1041\n860\n-1332\n-2002\n-2055\n-1447\n3358\n-672\n-705\n-1424\n228.01\n410.92\n266.81\n107.09\n151.87\n168.76\n116.66\n361.55\n408.76\n237.42\n-1012803.26\n1059435.12\n\n\n2025-02-04\n2072238.38\n1041\n860\n-1332\n-2002\n-2055\n-1447\n3358\n-672\n-705\n-1424\n232.80\n412.37\n267.94\n109.96\n153.49\n168.13\n118.65\n361.95\n411.49\n242.06\n-1018356.65\n1053881.73\n\n\n2025-02-05\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n232.47\n413.29\n270.43\n109.88\n154.69\n169.01\n124.83\n358.85\n413.82\n236.17\n-1414403.65\n1074394.63\n\n\n2025-02-06\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n233.22\n415.82\n276.90\n108.43\n153.51\n168.88\n128.68\n365.45\n414.16\n238.83\n-1423011.97\n1065786.31\n\n\n2025-02-07\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n227.63\n409.75\n275.80\n108.89\n153.12\n167.97\n129.84\n363.88\n407.37\n229.15\n-1411762.55\n1077035.73\n\n\n2025-02-10\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n227.65\n412.22\n271.04\n110.97\n154.24\n167.53\n133.57\n363.22\n413.99\n233.14\n-1419011.63\n1069786.65\n\n\n2025-02-11\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n232.62\n411.44\n274.99\n111.67\n156.13\n169.43\n132.80\n362.23\n416.36\n232.76\n-1428269.16\n1060529.12\n\n\n2025-02-12\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n236.87\n409.04\n275.45\n107.35\n155.26\n169.58\n131.14\n352.04\n407.14\n228.93\n-1397500.49\n1091297.79\n\n\n2025-02-13\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n241.53\n410.54\n276.32\n108.13\n157.25\n171.02\n135.29\n353.70\n412.43\n230.37\n-1407148.49\n1081649.79\n\n\n2025-02-14\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n244.60\n408.43\n276.59\n108.24\n156.15\n162.89\n138.85\n353.32\n409.50\n228.68\n-1387594.90\n1101203.38\n\n\n2025-02-18\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n244.47\n409.64\n279.95\n110.14\n154.99\n165.43\n139.40\n354.00\n403.31\n226.65\n-1389462.82\n1099335.46\n\n\n2025-02-19\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n244.87\n414.77\n279.25\n110.30\n157.89\n166.49\n139.23\n353.00\n395.43\n226.63\n-1385259.98\n1103538.30\n\n\n2025-02-20\n2488798.28\n1041\n860\n-1332\n-2002\n-2055\n-1447\n0\n-672\n-705\n-1424\n245.83\n416.13\n266.80\n112.00\n159.68\n167.21\n140.11\n349.15\n394.64\n222.88\n-1366147.16\n1122651.12\n\n\n2025-02-21\n2103210.87\n0\n860\n-1332\n-2002\n0\n-1447\n0\n-672\n-705\n0\n245.55\n408.21\n264.24\n110.69\n162.30\n170.23\n134.43\n340.04\n385.30\n216.58\n-968974.65\n1134236.22\n\n\n2025-02-24\n2103210.87\n0\n860\n-1332\n-2002\n0\n-1447\n0\n-672\n-705\n0\n247.10\n404.00\n261.34\n111.27\n163.74\n170.54\n130.28\n338.92\n382.42\n212.71\n-967559.14\n1135651.73\n\n\n2025-02-25\n2103210.87\n0\n860\n-1332\n-2002\n0\n-1447\n0\n-672\n-705\n0\n247.04\n397.90\n257.40\n109.73\n166.09\n172.65\n126.63\n342.36\n393.29\n212.80\n-977502.18\n1125708.69\n\n\n2025-02-26\n2103210.87\n0\n860\n-1332\n-2002\n0\n-1447\n0\n-672\n-705\n0\n240.36\n399.73\n258.79\n109.46\n163.08\n171.30\n131.28\n342.58\n390.48\n214.35\n-973452.66\n1129758.21\n\n\n2025-02-27\n2103210.87\n0\n860\n-1332\n-2002\n0\n-1447\n0\n-672\n-705\n0\n237.30\n392.53\n259.05\n110.15\n163.73\n171.97\n120.15\n340.00\n390.27\n208.74\n-980460.04\n1122750.83\n\n\n2025-02-28\n1106941.93\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n241.84\n396.99\n264.65\n111.33\n165.02\n173.84\n124.92\n343.95\n396.60\n212.28\n0.00\n1106941.93\n\n\n2025-03-03\n106987.14\n-2162\n1334\n1807\n-3778\n-3392\n-3646\n4457\n1425\n1363\n2539\n238.03\n388.49\n260.62\n107.76\n167.28\n175.59\n114.06\n332.04\n389.69\n205.02\n893048.63\n1000035.77\n\n\n2025-03-04\n106987.14\n-2162\n1334\n1807\n-3778\n-3392\n-3646\n4457\n1425\n1363\n2539\n235.93\n388.61\n250.25\n107.54\n165.42\n173.18\n115.99\n326.75\n381.68\n203.80\n881986.01\n988973.15\n\n\n2025-03-05\n106987.14\n-2162\n1334\n1807\n-3778\n-3392\n-3646\n4457\n1425\n1363\n2539\n235.74\n401.02\n251.53\n105.44\n165.12\n174.61\n117.30\n338.49\n386.35\n208.36\n945513.53\n1052500.67\n\n\n2025-03-06\n601001.02\n-2162\n1334\n1807\n-3778\n-3392\n-3646\n0\n1425\n1363\n2539\n235.33\n396.89\n246.54\n107.62\n165.83\n174.66\n110.57\n341.01\n381.73\n200.70\n376086.04\n977087.06\n\n\n2025-03-07\n601001.02\n-2162\n1334\n1807\n-3778\n-3392\n-3646\n0\n1425\n1363\n2539\n239.07\n393.31\n242.28\n109.02\n166.69\n175.95\n112.69\n350.30\n376.80\n199.25\n345454.07\n946455.09\n\n\n2025-03-10\n1510733.18\n-2162\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n1363\n0\n227.48\n380.16\n232.22\n111.80\n167.70\n176.26\n106.98\n345.21\n374.65\n194.54\n-615968.88\n894764.30\n\n\n2025-03-11\n1510733.18\n-2162\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n1363\n0\n220.84\n380.45\n229.14\n109.16\n165.86\n173.12\n108.76\n339.77\n368.16\n196.59\n-590160.57\n920572.61\n\n\n2025-03-12\n1043524.98\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n1363\n0\n216.98\n383.27\n227.90\n109.13\n162.85\n168.37\n115.74\n338.13\n364.73\n198.89\n-88312.94\n955212.04\n\n\n2025-03-13\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n209.68\n378.77\n225.19\n108.67\n162.99\n168.59\n115.58\n333.31\n347.25\n193.89\n-597850.55\n929253.20\n\n\n2025-03-14\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n213.49\n388.56\n232.44\n111.90\n162.81\n167.97\n121.67\n339.64\n351.31\n197.95\n-585102.30\n942001.45\n\n\n2025-03-17\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n214.00\n388.70\n233.93\n113.76\n162.84\n169.76\n119.53\n342.64\n354.13\n195.74\n-594295.72\n932808.03\n\n\n2025-03-18\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n212.69\n383.52\n234.97\n113.64\n164.25\n167.71\n115.43\n336.71\n349.57\n192.82\n-606511.15\n920592.60\n\n\n2025-03-19\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n215.24\n387.82\n239.11\n115.41\n162.99\n168.57\n117.52\n338.62\n353.42\n195.54\n-603601.90\n923501.85\n\n\n2025-03-20\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n214.10\n386.84\n239.01\n115.90\n163.02\n167.55\n118.53\n336.25\n355.52\n194.95\n-606520.53\n920583.22\n\n\n2025-03-21\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n218.27\n391.26\n241.63\n115.50\n163.63\n166.69\n117.70\n335.78\n351.15\n196.21\n-598716.36\n928387.39\n\n\n2025-03-24\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n220.73\n393.08\n248.06\n115.80\n163.29\n165.65\n121.41\n341.67\n363.77\n203.26\n-584083.51\n943020.24\n\n\n2025-03-25\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n223.75\n395.16\n251.13\n116.59\n161.02\n162.85\n120.69\n342.62\n360.99\n205.71\n-565031.02\n962072.73\n\n\n2025-03-26\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n221.53\n389.97\n251.03\n118.27\n161.72\n166.58\n113.76\n341.11\n362.13\n201.13\n-596427.25\n930676.50\n\n\n2025-03-27\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n223.85\n390.58\n248.12\n117.89\n163.13\n168.71\n111.43\n339.30\n362.73\n201.36\n-609305.82\n917797.93\n\n\n2025-03-28\n1527103.75\n0\n1334\n0\n-3778\n-3392\n-3646\n0\n1425\n0\n0\n217.90\n378.80\n242.85\n117.73\n163.71\n168.03\n109.67\n329.69\n358.15\n192.72\n-637598.19\n889505.56\n\n\n2025-03-31\n864640.87\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n222.13\n375.39\n245.30\n118.93\n165.84\n170.42\n108.38\n329.80\n366.49\n190.26\n0.00\n864640.87\n\n\n2025-04-01\n-135084.10\n1038\n572\n-564\n-2566\n1136\n1231\n2777\n-614\n489\n1750\n223.19\n382.19\n243.66\n119.04\n153.25\n170.56\n110.15\n330.57\n365.52\n192.17\n1009407.73\n874323.63\n\n\n2025-04-02\n209875.90\n1038\n572\n-564\n-2566\n1136\n1231\n2777\n-614\n489\n0\n223.89\n382.14\n245.82\n118.67\n155.36\n169.50\n110.42\n334.66\n370.89\n196.01\n675495.97\n885371.87\n\n\n2025-04-03\n98809.68\n0\n572\n0\n0\n1136\n1231\n0\n0\n489\n0\n203.19\n373.11\n228.69\n112.43\n159.82\n172.39\n101.80\n305.76\n355.91\n178.41\n781226.52\n880036.20\n\n\n2025-04-04\n98809.68\n0\n572\n0\n0\n1136\n1231\n0\n0\n489\n0\n188.38\n359.84\n210.28\n104.34\n153.24\n163.75\n94.31\n288.08\n353.90\n171.00\n754542.47\n853352.15\n\n\n2025-04-07\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n181.46\n357.86\n214.44\n102.94\n150.62\n160.23\n97.64\n280.06\n341.51\n175.26\n0.00\n833245.71\n\n\n2025-04-08\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n172.42\n354.56\n216.87\n100.77\n150.00\n158.39\n96.30\n273.94\n335.24\n170.66\n0.00\n833245.71\n\n\n2025-04-09\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n198.85\n390.49\n234.34\n105.80\n150.97\n162.32\n114.33\n301.01\n355.39\n191.10\n0.00\n833245.71\n\n\n2025-04-10\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n190.42\n381.35\n227.11\n99.93\n148.69\n163.56\n107.57\n289.16\n353.62\n181.22\n0.00\n833245.71\n\n\n2025-04-11\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n198.15\n388.45\n236.20\n103.14\n151.73\n166.91\n110.93\n293.45\n353.86\n184.87\n0.00\n833245.71\n\n\n2025-04-14\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n202.52\n387.81\n234.72\n103.39\n154.36\n169.13\n110.71\n298.12\n357.20\n182.12\n0.00\n833245.71\n\n\n2025-04-15\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n202.14\n385.73\n233.13\n103.10\n153.62\n168.47\n112.20\n293.43\n354.11\n179.59\n0.00\n833245.71\n\n\n2025-04-16\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n194.27\n371.61\n229.61\n104.19\n153.91\n166.39\n104.49\n290.14\n345.99\n174.33\n0.00\n833245.71\n\n\n2025-04-17\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n196.98\n367.78\n231.96\n106.92\n157.47\n170.63\n101.49\n294.25\n355.06\n172.61\n0.00\n833245.71\n\n\n2025-04-21\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n193.16\n359.12\n228.99\n105.35\n156.92\n165.75\n96.91\n284.74\n346.90\n167.32\n0.00\n833245.71\n\n\n2025-04-22\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n199.74\n366.82\n235.59\n108.30\n157.75\n167.88\n98.89\n291.17\n354.43\n173.18\n0.00\n833245.71\n\n\n2025-04-23\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n204.60\n374.39\n240.88\n107.37\n155.38\n165.73\n102.71\n295.77\n356.42\n180.60\n0.00\n833245.71\n\n\n2025-04-24\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n208.37\n387.30\n244.64\n108.63\n154.93\n159.53\n106.43\n306.86\n359.64\n186.54\n0.00\n833245.71\n\n\n2025-04-25\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n209.28\n391.85\n243.55\n108.57\n154.58\n161.02\n111.01\n306.45\n357.58\n188.99\n0.00\n833245.71\n\n\n2025-04-28\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n210.14\n391.16\n243.22\n108.63\n155.35\n161.85\n108.73\n307.06\n356.92\n187.70\n0.00\n833245.71\n\n\n2025-04-29\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n211.21\n394.04\n244.62\n108.36\n155.91\n162.26\n109.02\n307.40\n359.00\n187.39\n0.00\n833245.71\n\n\n2025-04-30\n833245.71\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n210.77\n390.06\n242.25\n105.04\n155.81\n161.97\n106.95\n303.57\n357.69\n181.88\n0.00\n833245.71\n\n\n\n\n\n\n\n\n\nAfter Controlling Lever\n\n\n\n\n\n\n\nDate\nCash\nAAPL Qty\nMSFT Qty\nJPM Qty\nXOM Qty\nJNJ Qty\nPG Qty\nNVDA Qty\nCAT Qty\nHD Qty\nAMZN Qty\nAAPL Close\nMSFT Close\nJPM Close\nXOM Close\nJNJ Close\nPG Close\nNVDA Close\nCAT Close\nHD Close\nAMZN Close\nPortfolio Value\nMarket Value\n\n\n\n\n2024-11-01\n451235.76\n362\n228\n-813\n0\n462\n628\n551\n310\n274\n388\n222.91\n410.37\n222.94\n114.95\n160.13\n165.10\n135.40\n379.63\n392.59\n197.93\n547327.62\n998563.38\n\n\n2024-11-04\n451235.76\n362\n228\n-813\n0\n462\n628\n551\n310\n274\n388\n222.01\n408.46\n219.78\n118.61\n158.24\n165.08\n136.05\n376.52\n395.57\n195.78\n547626.05\n998861.81\n\n\n2024-11-05\n527698.03\n362\n228\n-813\n0\n462\n628\n0\n310\n274\n388\n223.45\n411.46\n221.49\n118.96\n158.35\n165.76\n139.91\n383.37\n400.09\n199.50\n477760.75\n1005458.78\n\n\n2024-11-06\n744273.84\n362\n228\n0\n0\n462\n0\n0\n0\n0\n0\n222.72\n420.18\n247.06\n121.00\n157.88\n161.05\n145.61\n416.88\n388.37\n207.09\n249366.24\n993640.08\n\n\n2024-11-07\n922713.44\n0\n0\n0\n0\n462\n0\n0\n0\n0\n0\n227.48\n425.43\n236.38\n121.15\n156.73\n163.41\n148.88\n408.21\n399.44\n210.05\n72409.26\n995122.70\n\n\n2024-11-08\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n226.96\n422.54\n236.98\n121.11\n155.47\n167.71\n147.63\n393.37\n405.90\n208.18\n0.00\n994836.26\n\n\n2024-11-11\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n224.23\n418.01\n239.29\n120.47\n155.04\n166.03\n145.26\n396.54\n408.29\n206.84\n0.00\n994836.26\n\n\n2024-11-12\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n224.23\n423.03\n239.56\n120.35\n152.64\n165.84\n148.29\n393.01\n403.08\n208.91\n0.00\n994836.26\n\n\n2024-11-13\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n225.12\n425.20\n241.16\n121.47\n153.24\n166.58\n146.27\n387.07\n410.19\n214.10\n0.00\n994836.26\n\n\n2024-11-14\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.22\n426.89\n241.87\n120.56\n151.87\n167.08\n146.76\n387.36\n405.72\n211.48\n0.00\n994836.26\n\n\n2024-11-15\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n225.00\n415.00\n245.31\n119.31\n154.00\n169.54\n141.98\n384.07\n408.18\n202.61\n0.00\n994836.26\n\n\n2024-11-18\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.02\n415.76\n245.03\n120.31\n154.77\n170.75\n140.15\n384.46\n410.44\n201.70\n0.00\n994836.26\n\n\n2024-11-19\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.28\n417.79\n243.09\n118.63\n153.00\n170.76\n147.01\n382.33\n406.80\n204.61\n0.00\n994836.26\n\n\n2024-11-20\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n229.00\n415.49\n240.78\n120.32\n153.11\n170.89\n145.89\n381.50\n400.00\n202.88\n0.00\n994836.26\n\n\n2024-11-21\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n228.52\n412.87\n244.76\n121.93\n155.50\n172.75\n146.67\n389.59\n410.45\n198.38\n0.00\n994836.26\n\n\n2024-11-22\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n229.87\n417.00\n248.55\n121.79\n155.17\n176.28\n141.95\n397.49\n420.00\n197.12\n0.00\n994836.26\n\n\n2024-11-25\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n232.87\n418.79\n250.29\n119.97\n155.78\n177.39\n136.02\n405.65\n428.67\n201.45\n0.00\n994836.26\n\n\n2024-11-26\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n235.06\n427.99\n249.97\n117.97\n154.52\n179.31\n136.92\n407.83\n429.52\n207.86\n0.00\n994836.26\n\n\n2024-11-27\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n234.93\n422.99\n249.79\n117.66\n155.40\n179.36\n135.34\n403.70\n427.19\n205.74\n0.00\n994836.26\n\n\n2024-11-29\n994836.26\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n237.33\n423.46\n249.72\n117.96\n155.01\n179.26\n138.25\n406.11\n429.13\n207.89\n0.00\n994836.26\n\n\n2024-12-02\n1193620.09\n-355\n-150\n-347\n1694\n-309\n-506\n1440\n-206\n-196\n-277\n239.59\n430.98\n246.25\n117.85\n154.80\n179.70\n138.63\n402.51\n426.96\n210.71\n-199614.39\n994005.70\n\n\n2024-12-03\n1193620.09\n-355\n-150\n-347\n1694\n-309\n-506\n1440\n-206\n-196\n-277\n242.65\n431.20\n244.82\n117.67\n152.36\n175.42\n140.26\n399.26\n429.35\n213.44\n-195830.71\n997789.38\n\n\n2024-12-04\n1193620.09\n-355\n-150\n-347\n1694\n-309\n-506\n1440\n-206\n-196\n-277\n243.01\n437.42\n243.40\n114.28\n150.47\n175.11\n145.14\n399.51\n427.92\n218.16\n-195452.02\n998168.07\n\n\n2024-12-05\n1276017.71\n-355\n0\n-347\n1694\n-309\n-506\n0\n-206\n-196\n0\n243.04\n442.62\n245.48\n114.78\n149.52\n176.03\n145.06\n394.98\n426.54\n220.55\n-277264.02\n998753.69\n\n\n2024-12-06\n1276017.71\n-355\n0\n-347\n1694\n-309\n-506\n0\n-206\n-196\n0\n242.84\n443.57\n247.36\n113.57\n149.31\n173.82\n142.44\n395.03\n431.37\n227.03\n-279668.95\n996348.76\n\n\n2024-12-09\n1276017.71\n-355\n0\n-347\n1694\n-309\n-506\n0\n-206\n-196\n0\n246.75\n446.02\n243.81\n112.90\n149.60\n170.79\n138.81\n399.26\n429.18\n226.09\n-279958.70\n996059.01\n\n\n2024-12-10\n1276017.71\n-355\n0\n-347\n1694\n-309\n-506\n0\n-206\n-196\n0\n247.77\n443.33\n242.86\n112.67\n149.23\n172.28\n135.07\n388.39\n422.59\n225.04\n-277489.52\n998528.19\n\n\n2024-12-11\n1331109.11\n0\n0\n-347\n0\n0\n-506\n0\n-206\n-196\n0\n246.49\n448.99\n243.53\n111.92\n146.64\n170.63\n139.31\n388.87\n421.38\n230.26\n-333541.39\n997567.72\n\n\n2024-12-12\n1251749.67\n0\n0\n-347\n0\n0\n-506\n0\n0\n-196\n0\n247.96\n449.56\n241.53\n111.82\n146.24\n170.85\n137.34\n380.78\n414.42\n228.97\n-251487.33\n1000262.34\n\n\n2024-12-13\n1251749.67\n0\n0\n-347\n0\n0\n-506\n0\n0\n-196\n0\n248.13\n447.27\n239.94\n110.84\n146.62\n171.06\n134.25\n380.51\n416.98\n227.46\n-251543.62\n1000206.05\n\n\n2024-12-16\n1251749.67\n0\n0\n-347\n0\n0\n-506\n0\n0\n-196\n0\n251.04\n451.59\n239.58\n108.47\n143.85\n171.14\n132.00\n378.92\n410.71\n232.93\n-250230.26\n1001519.41\n\n\n2024-12-17\n1251749.67\n0\n0\n-347\n0\n0\n-506\n0\n0\n-196\n0\n253.48\n454.46\n238.36\n108.01\n146.41\n170.33\n130.39\n375.80\n408.47\n231.15\n-248958.02\n1002791.65\n\n\n2024-12-18\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n248.05\n437.39\n230.37\n106.42\n144.75\n169.08\n128.91\n363.89\n393.82\n220.52\n0.00\n1006781.59\n\n\n2024-12-19\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n249.79\n437.03\n232.96\n105.51\n143.58\n169.19\n130.68\n360.37\n385.02\n223.29\n0.00\n1006781.59\n\n\n2024-12-20\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n254.49\n436.60\n237.60\n105.87\n144.47\n168.06\n134.70\n366.04\n392.60\n224.92\n0.00\n1006781.59\n\n\n2024-12-23\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n255.27\n435.25\n238.39\n106.30\n145.27\n168.11\n139.67\n365.39\n392.45\n225.06\n0.00\n1006781.59\n\n\n2024-12-24\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n258.20\n439.33\n242.31\n106.40\n145.85\n168.94\n140.22\n367.57\n396.14\n229.05\n0.00\n1006781.59\n\n\n2024-12-26\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n259.02\n438.11\n243.14\n106.49\n145.58\n170.16\n139.93\n367.12\n395.14\n227.05\n0.00\n1006781.59\n\n\n2024-12-27\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n255.59\n430.53\n241.17\n106.48\n145.05\n169.53\n137.01\n364.86\n392.86\n223.75\n0.00\n1006781.59\n\n\n2024-12-30\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n252.20\n424.83\n239.32\n105.76\n143.34\n167.09\n137.49\n363.01\n389.43\n221.30\n0.00\n1006781.59\n\n\n2024-12-31\n1006781.59\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n250.42\n421.50\n239.71\n107.57\n144.62\n167.65\n134.29\n362.76\n388.99\n219.39\n0.00\n1006781.59\n\n\n2025-01-02\n371564.07\n-730\n246\n342\n836\n456\n490\n760\n287\n243\n392\n243.85\n418.58\n240.00\n107.31\n144.02\n165.98\n138.31\n359.77\n388.46\n220.22\n632846.27\n1004410.34\n\n\n2025-01-03\n480950.87\n-730\n246\n342\n836\n456\n490\n0\n287\n243\n392\n243.36\n423.35\n243.28\n107.86\n144.19\n165.13\n144.47\n363.79\n389.18\n224.19\n533389.31\n1014340.18\n\n\n2025-01-06\n480950.87\n-730\n246\n342\n836\n456\n490\n0\n287\n243\n392\n245.00\n427.85\n240.85\n107.74\n143.66\n160.60\n149.43\n364.20\n389.37\n227.61\n531410.83\n1012361.70\n\n\n2025-01-07\n480950.87\n-730\n246\n342\n836\n456\n490\n0\n287\n243\n392\n242.21\n422.37\n243.17\n108.75\n146.23\n161.30\n140.14\n363.00\n384.23\n222.11\n531502.75\n1012453.62\n\n\n2025-01-08\n480950.87\n-730\n246\n342\n836\n456\n490\n0\n287\n243\n392\n242.70\n424.56\n243.13\n106.93\n142.27\n162.10\n140.11\n361.07\n387.20\n222.13\n528910.47\n1009861.34\n\n\n2025-01-10\n386798.27\n0\n246\n342\n836\n456\n0\n0\n287\n243\n392\n236.85\n418.95\n239.87\n106.54\n142.06\n158.56\n135.91\n351.00\n389.89\n218.94\n620248.79\n1007047.06\n\n\n2025-01-13\n386798.27\n0\n246\n342\n836\n456\n0\n0\n287\n243\n392\n234.40\n417.19\n244.21\n109.29\n144.47\n158.84\n133.23\n362.50\n389.18\n218.46\n627637.88\n1014436.15\n\n\n2025-01-14\n386798.27\n0\n246\n342\n836\n456\n0\n0\n287\n243\n392\n233.28\n415.67\n247.47\n109.72\n144.75\n159.74\n131.76\n371.57\n392.78\n217.76\n632069.53\n1018867.80\n\n\n2025-01-15\n386798.27\n0\n246\n342\n836\n456\n0\n0\n287\n243\n392\n237.87\n426.31\n252.35\n111.51\n144.97\n159.65\n136.24\n374.89\n406.09\n223.35\n644331.14\n1031129.41\n\n\n2025-01-16\n474353.69\n0\n246\n0\n836\n456\n0\n0\n287\n243\n392\n228.26\n424.58\n254.27\n111.32\n147.77\n160.50\n133.57\n380.55\n409.33\n220.66\n560077.08\n1034430.77\n\n\n2025-01-17\n585239.01\n0\n246\n0\n836\n456\n0\n0\n0\n243\n392\n229.98\n429.03\n259.16\n112.32\n147.03\n161.13\n137.71\n386.02\n409.38\n225.94\n454534.40\n1039773.41\n\n\n2025-01-21\n686438.79\n0\n246\n0\n836\n456\n0\n0\n0\n0\n392\n222.64\n428.50\n263.03\n111.47\n148.15\n161.72\n140.83\n398.36\n418.43\n230.71\n356594.64\n1043033.43\n\n\n2025-01-22\n778586.23\n0\n246\n0\n836\n456\n0\n0\n0\n0\n0\n223.83\n446.20\n262.84\n109.53\n145.27\n164.74\n147.07\n397.61\n410.10\n235.01\n267575.40\n1046161.63\n\n\n2025-01-23\n778586.23\n0\n246\n0\n836\n456\n0\n0\n0\n0\n0\n223.66\n446.71\n265.95\n110.15\n146.64\n166.15\n147.22\n406.40\n414.39\n235.42\n268843.90\n1047430.13\n\n\n2025-01-24\n778586.23\n0\n246\n0\n836\n456\n0\n0\n0\n0\n0\n222.78\n444.06\n264.84\n108.66\n146.82\n164.12\n142.62\n407.63\n414.50\n234.85\n267028.44\n1045614.67\n\n\n2025-01-27\n778586.23\n0\n246\n0\n836\n456\n0\n0\n0\n0\n0\n229.86\n434.56\n265.85\n110.17\n152.89\n169.66\n118.42\n394.98\n424.87\n235.42\n268721.72\n1047307.95\n\n\n2025-01-28\n778586.23\n0\n246\n0\n836\n456\n0\n0\n0\n0\n0\n238.26\n447.20\n267.14\n108.04\n150.38\n166.19\n128.99\n390.29\n418.83\n238.15\n268905.92\n1047492.15\n\n\n2025-01-29\n778586.23\n0\n246\n0\n836\n456\n0\n0\n0\n0\n0\n239.36\n442.33\n266.58\n108.67\n151.15\n166.23\n123.70\n393.23\n413.42\n237.07\n268585.70\n1047171.93\n\n\n2025-01-30\n848814.79\n0\n246\n0\n836\n0\n0\n0\n0\n0\n0\n237.59\n414.99\n268.23\n109.57\n152.87\n167.41\n124.65\n374.98\n414.50\n234.64\n193688.06\n1042502.85\n\n\n2025-01-31\n1040229.43\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n236.00\n415.06\n267.30\n106.83\n152.15\n165.99\n120.07\n371.44\n411.98\n237.68\n0.00\n1040229.43\n\n\n2025-02-03\n1039692.54\n724\n404\n-336\n-505\n-519\n-365\n1452\n-169\n-178\n-359\n228.01\n410.92\n266.81\n107.09\n151.87\n168.76\n116.66\n361.55\n408.76\n237.42\n-2760.31\n1036932.23\n\n\n2025-02-04\n1039692.54\n724\n404\n-336\n-505\n-519\n-365\n1452\n-169\n-178\n-359\n232.80\n412.37\n267.94\n109.96\n153.49\n168.13\n118.65\n361.95\n411.49\n242.06\n-476.23\n1039216.31\n\n\n2025-02-05\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n232.47\n413.29\n270.43\n109.88\n154.69\n169.01\n124.83\n358.85\n413.82\n236.17\n-172139.84\n1047673.30\n\n\n2025-02-06\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n233.22\n415.82\n276.90\n108.43\n153.51\n168.88\n128.68\n365.45\n414.16\n238.83\n-173487.38\n1046325.76\n\n\n2025-02-07\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n227.63\n409.75\n275.80\n108.89\n153.12\n167.97\n129.84\n363.88\n407.37\n229.15\n-174365.89\n1045447.25\n\n\n2025-02-10\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n227.65\n412.22\n271.04\n110.97\n154.24\n167.53\n133.57\n363.22\n413.99\n233.14\n-175724.48\n1044088.66\n\n\n2025-02-11\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n232.62\n411.44\n274.99\n111.67\n156.13\n169.43\n132.80\n362.23\n416.36\n232.76\n-175914.56\n1043898.58\n\n\n2025-02-12\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n236.87\n409.04\n275.45\n107.35\n155.26\n169.58\n131.14\n352.04\n407.14\n228.93\n-166645.10\n1053168.04\n\n\n2025-02-13\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n241.53\n410.54\n276.32\n108.13\n157.25\n171.02\n135.29\n353.70\n412.43\n230.37\n-166649.01\n1053164.13\n\n\n2025-02-14\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n244.60\n408.43\n276.59\n108.24\n156.15\n162.89\n138.85\n353.32\n409.50\n228.68\n-160694.22\n1059118.92\n\n\n2025-02-18\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n244.47\n409.64\n279.95\n110.14\n154.99\n165.43\n139.40\n354.00\n403.31\n226.65\n-160997.35\n1058815.79\n\n\n2025-02-19\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n244.87\n414.77\n279.25\n110.30\n157.89\n166.49\n139.23\n353.00\n395.43\n226.63\n-158794.01\n1061019.13\n\n\n2025-02-20\n1219813.14\n724\n404\n-336\n-505\n-519\n-365\n0\n-169\n-178\n-359\n245.83\n416.13\n266.80\n112.00\n159.68\n167.21\n140.11\n349.15\n394.64\n222.88\n-153279.12\n1066534.02\n\n\n2025-02-21\n1236467.44\n0\n404\n-336\n-505\n0\n-365\n0\n-169\n-178\n0\n245.55\n408.21\n264.24\n110.69\n162.30\n170.23\n134.43\n340.04\n385.30\n216.58\n-167950.36\n1068517.08\n\n\n2025-02-24\n1236467.44\n0\n404\n-336\n-505\n0\n-365\n0\n-169\n-178\n0\n247.10\n404.00\n261.34\n111.27\n163.74\n170.54\n130.28\n338.92\n382.42\n212.71\n-168380.93\n1068086.51\n\n\n2025-02-25\n1236467.44\n0\n404\n-336\n-505\n0\n-365\n0\n-169\n-178\n0\n247.04\n397.90\n257.40\n109.73\n166.09\n172.65\n126.63\n342.36\n393.29\n212.80\n-172030.16\n1064437.28\n\n\n2025-02-26\n1236467.44\n0\n404\n-336\n-505\n0\n-365\n0\n-169\n-178\n0\n240.36\n399.73\n258.79\n109.46\n163.08\n171.30\n131.28\n342.58\n390.48\n214.35\n-170665.78\n1065801.66\n\n\n2025-02-27\n1236467.44\n0\n404\n-336\n-505\n0\n-365\n0\n-169\n-178\n0\n237.30\n392.53\n259.05\n110.15\n163.73\n171.97\n120.15\n340.00\n390.27\n208.74\n-173781.54\n1062685.90\n\n\n2025-02-28\n1059533.40\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n241.84\n396.99\n264.65\n111.33\n165.02\n173.84\n124.92\n343.95\n396.60\n212.28\n0.00\n1059533.40\n\n\n2025-03-03\n859900.13\n-404\n255\n345\n-706\n-634\n-682\n852\n272\n260\n485\n238.03\n388.49\n260.62\n107.76\n167.28\n175.59\n114.06\n332.04\n389.69\n205.02\n179176.37\n1039076.50\n\n\n2025-03-04\n859900.13\n-404\n255\n345\n-706\n-634\n-682\n852\n272\n260\n485\n235.93\n388.61\n250.25\n107.54\n165.42\n173.18\n115.99\n326.75\n381.68\n203.80\n176987.08\n1036887.21\n\n\n2025-03-05\n859900.13\n-404\n255\n345\n-706\n-634\n-682\n852\n272\n260\n485\n235.74\n401.02\n251.53\n105.44\n165.12\n174.61\n117.30\n338.49\n386.35\n208.36\n189102.73\n1049002.86\n\n\n2025-03-06\n954335.81\n-404\n255\n345\n-706\n-634\n-682\n0\n272\n260\n485\n235.33\n396.89\n246.54\n107.62\n165.83\n174.66\n110.57\n341.01\n381.73\n200.70\n80299.89\n1034635.70\n\n\n2025-03-07\n954335.81\n-404\n255\n345\n-706\n-634\n-682\n0\n272\n260\n485\n239.07\n393.31\n242.28\n109.02\n166.69\n175.95\n112.69\n350.30\n376.80\n199.25\n74534.74\n1028870.55\n\n\n2025-03-10\n1128072.21\n-404\n255\n0\n-706\n-634\n-682\n0\n272\n260\n0\n227.48\n380.16\n232.22\n111.80\n167.70\n176.26\n106.98\n345.21\n374.65\n194.54\n-109116.92\n1018955.29\n\n\n2025-03-11\n1128072.21\n-404\n255\n0\n-706\n-634\n-682\n0\n272\n260\n0\n220.84\n380.45\n229.14\n109.16\n165.86\n173.12\n108.76\n339.77\n368.16\n196.59\n-104355.61\n1023716.60\n\n\n2025-03-12\n1040767.81\n0\n255\n0\n-706\n-634\n-682\n0\n272\n260\n0\n216.98\n383.27\n227.90\n109.13\n162.85\n168.37\n115.74\n338.13\n364.73\n198.89\n-10586.01\n1030181.80\n\n\n2025-03-13\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n209.68\n378.77\n225.19\n108.67\n162.99\n168.59\n115.58\n333.31\n347.25\n193.89\n-107788.39\n1025224.82\n\n\n2025-03-14\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n213.49\n388.56\n232.44\n111.90\n162.81\n167.97\n121.67\n339.64\n351.31\n197.95\n-105313.60\n1027699.61\n\n\n2025-03-17\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n214.00\n388.70\n233.93\n113.76\n162.84\n169.76\n119.53\n342.64\n354.13\n195.74\n-107014.86\n1025998.35\n\n\n2025-03-18\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n212.69\n383.52\n234.97\n113.64\n164.25\n167.71\n115.43\n336.71\n349.57\n192.82\n-109359.84\n1023653.37\n\n\n2025-03-19\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n215.24\n387.82\n239.11\n115.41\n162.99\n168.57\n117.52\n338.62\n353.42\n195.54\n-108781.12\n1024232.09\n\n\n2025-03-20\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n214.10\n386.84\n239.01\n115.90\n163.02\n167.55\n118.53\n336.25\n355.52\n194.95\n-109344.98\n1023668.23\n\n\n2025-03-21\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n218.27\n391.26\n241.63\n115.50\n163.63\n166.69\n117.70\n335.78\n351.15\n196.21\n-107863.54\n1025149.67\n\n\n2025-03-24\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n220.73\n393.08\n248.06\n115.80\n163.29\n165.65\n121.41\n341.67\n363.77\n203.26\n-105084.32\n1027928.89\n\n\n2025-03-25\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n223.75\n395.16\n251.13\n116.59\n161.02\n162.85\n120.69\n342.62\n360.99\n205.71\n-101504.48\n1031508.73\n\n\n2025-03-26\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n221.53\n389.97\n251.03\n118.27\n161.72\n166.58\n113.76\n341.11\n362.13\n201.13\n-107412.39\n1025600.82\n\n\n2025-03-27\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n223.85\n390.58\n248.12\n117.89\n163.13\n168.71\n111.43\n339.30\n362.73\n201.36\n-109827.48\n1023185.73\n\n\n2025-03-28\n1133013.21\n0\n255\n0\n-706\n-634\n-682\n0\n272\n0\n0\n217.90\n378.80\n242.85\n117.73\n163.71\n168.03\n109.67\n329.69\n358.15\n192.72\n-115236.30\n1017776.91\n\n\n2025-03-31\n1013109.68\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n222.13\n375.39\n245.30\n118.93\n165.84\n170.42\n108.38\n329.80\n366.49\n190.26\n0.00\n1013109.68\n\n\n2025-04-01\n741237.97\n401\n221\n-371\n-1185\n439\n476\n1074\n-404\n189\n677\n223.19\n382.19\n243.66\n119.04\n153.25\n170.56\n110.15\n330.57\n365.52\n192.17\n274899.42\n1016137.39\n\n\n2025-04-02\n874688.21\n401\n221\n-371\n-1185\n439\n476\n1074\n-404\n189\n0\n223.89\n382.14\n245.82\n118.67\n155.36\n169.50\n110.42\n334.66\n370.89\n196.01\n144781.35\n1019469.56\n\n\n2025-04-03\n723552.74\n0\n221\n0\n0\n439\n476\n0\n0\n189\n0\n203.19\n373.11\n228.69\n112.43\n159.82\n172.39\n101.80\n305.76\n355.91\n178.41\n301942.92\n1025495.66\n\n\n2025-04-04\n723552.74\n0\n221\n0\n0\n439\n476\n0\n0\n189\n0\n188.38\n359.84\n210.28\n104.34\n153.24\n163.75\n94.31\n288.08\n353.90\n171.00\n291629.10\n1015181.84\n\n\n2025-04-07\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n181.46\n357.86\n214.44\n102.94\n150.62\n160.23\n97.64\n280.06\n341.51\n175.26\n0.00\n1007410.80\n\n\n2025-04-08\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n172.42\n354.56\n216.87\n100.77\n150.00\n158.39\n96.30\n273.94\n335.24\n170.66\n0.00\n1007410.80\n\n\n2025-04-09\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n198.85\n390.49\n234.34\n105.80\n150.97\n162.32\n114.33\n301.01\n355.39\n191.10\n0.00\n1007410.80\n\n\n2025-04-10\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n190.42\n381.35\n227.11\n99.93\n148.69\n163.56\n107.57\n289.16\n353.62\n181.22\n0.00\n1007410.80\n\n\n2025-04-11\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n198.15\n388.45\n236.20\n103.14\n151.73\n166.91\n110.93\n293.45\n353.86\n184.87\n0.00\n1007410.80\n\n\n2025-04-14\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n202.52\n387.81\n234.72\n103.39\n154.36\n169.13\n110.71\n298.12\n357.20\n182.12\n0.00\n1007410.80\n\n\n2025-04-15\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n202.14\n385.73\n233.13\n103.10\n153.62\n168.47\n112.20\n293.43\n354.11\n179.59\n0.00\n1007410.80\n\n\n2025-04-16\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n194.27\n371.61\n229.61\n104.19\n153.91\n166.39\n104.49\n290.14\n345.99\n174.33\n0.00\n1007410.80\n\n\n2025-04-17\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n196.98\n367.78\n231.96\n106.92\n157.47\n170.63\n101.49\n294.25\n355.06\n172.61\n0.00\n1007410.80\n\n\n2025-04-21\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n193.16\n359.12\n228.99\n105.35\n156.92\n165.75\n96.91\n284.74\n346.90\n167.32\n0.00\n1007410.80\n\n\n2025-04-22\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n199.74\n366.82\n235.59\n108.30\n157.75\n167.88\n98.89\n291.17\n354.43\n173.18\n0.00\n1007410.80\n\n\n2025-04-23\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n204.60\n374.39\n240.88\n107.37\n155.38\n165.73\n102.71\n295.77\n356.42\n180.60\n0.00\n1007410.80\n\n\n2025-04-24\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n208.37\n387.30\n244.64\n108.63\n154.93\n159.53\n106.43\n306.86\n359.64\n186.54\n0.00\n1007410.80\n\n\n2025-04-25\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n209.28\n391.85\n243.55\n108.57\n154.58\n161.02\n111.01\n306.45\n357.58\n188.99\n0.00\n1007410.80\n\n\n2025-04-28\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n210.14\n391.16\n243.22\n108.63\n155.35\n161.85\n108.73\n307.06\n356.92\n187.70\n0.00\n1007410.80\n\n\n2025-04-29\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n211.21\n394.04\n244.62\n108.36\n155.91\n162.26\n109.02\n307.40\n359.00\n187.39\n0.00\n1007410.80\n\n\n2025-04-30\n1007410.80\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n210.77\n390.06\n242.25\n105.04\n155.81\n161.97\n106.95\n303.57\n357.69\n181.88\n0.00\n1007410.80\n\n\n\n\n\n\n\n\n\n\n\nPerformance Analysis\n\ninitial capital: 1M\n\nEnd-of-Day Market Value Comparison \nDrawndowns Comparison \n\n\nStrategy Metrics Summary\n\n\n\n\n\nMetrics\nOriginal\nAfter Controlling Lever\n\n\n\n\nalpha(benchmark: S&P 500)\n-0.13%\n0.01%\n\n\nbeta(benchmark: S&P 500)\n0.32\n0.06\n\n\nCumulative Return\n-16.48%\n0.89%\n\n\nGeometric Mean Return\n-31.06%\n1.84%\n\n\nAverage Return per Trade\n-0.27%\n0.01%\n\n\nAnnualized Volatility\n27.28%\n6.76%\n\n\nSharpe Ratio(rf=0.046)\n-1.14\n0.27\n\n\nMax Drawdown\n26.63%\n5.72%\n\n\nAverage Number of Trades Per Year\n240\n240\n\n\n\n\n\np.s. The reason of high average number of trades per year(240) is that there are 10 stocks in our portfolio, and we execute one buy and one sell trade per stock per month. But for each stock, the average number of trades per year is 24.\n\n\nPerformance Analysis\n\nGrowth trajectory: Without leverage control, the portfolio ended below the starting capital ($1â€¯M â†’ $0.83M), reflecting a net loss. With leverage control, it modestly grew ($1â€¯M â†’ $1.01M), demonstrating sustainable gains.\nCumulative & geometric returns: Controlled leverage turned a deep drawdown into positive growth, and the market value of portfolio kept higher than at begining over the period, confirming mean reversion works when risk is contained.\nPer-trade efficiency: Average return per trade improved from â€“0.27% to +0.01%, indicating higher hit rate and profitability.\nRisk metrics: Volatility dropped from 27.28% to 6.76%, and max drawdown shrank from 26.63% to 5.72%, showcasing tighter drawdown control.\nSharpe ratio shift: From â€“1.14 (underperforming risk-free) to 0.27 (delivering positive risk-adjusted return).\n\nThis shows that mean reversion signals can generate returns, but only disciplined risk management is necessary, such as controlling lever and limiting the weight of single asset. Leverage control transforms a volatile, lossâ€making process into a stable, profitable strategy.\n\n\n\nLimitations and Future Enhancements\nEven with leverage control, the current implementation has several limitations:\n\nSimplistic Signal Framework:\n\nRelies solely on fixed-threshold scores for EMA deviation, MACD, ADX, ATR, IV, and yield spread.\nDoes not adapt thresholds to changing market regimes (e.g., high-volatility vs.Â low-volatility periods).\n\nLack of Transaction Cost Modeling:\n\nOmits commissions, slippage, and spreads, which can erode returnsâ€”especially for short-term or high-turnover strategies.\n\nIgnoring Market Microstructure:\n\nHourly and daily data may not capture intraday liquidity constraints or order-book dynamics, leading to unrealistic execution assumptions.\n\nNo Regime Detection or Regime-Based Allocation:\n\nTreats all periods equally; fails to switch off mean reversion signals during strong trending environments (e.g., bull/bear markets).\n\nUniform Indicator Weighting:\n\nAssigns fixed weights to each indicator; does not account for their varying predictive power over time. A dynamic or machine-learningâ€“based weighting scheme could improve signal quality.\n\nSingle Timeframe Analysis:\n\nUses daily and hourly frequencies but ignores higher-frequency signals or multi-timeframe confirmation that can reduce false signals.\n\nTail Risk and Black Swan Events:\n\nLacks a stress-test mechanism for extreme market moves or systemic shocks. Consider adding volatility overlays or drawdown limits.\n\n\n\nFuture Enhancements:\n\nImplement regime-switching to adapt thresholds and weights.\nIncorporate transaction cost estimates into portfolio optimization.\nExplore multi-timeframe signals and alternative data (e.g., sentiment, order flow).\nUse adaptive indicator weighting via machine learning or Bayesian updating.\nAdd tail-risk protection, such as option hedges or dynamic stop adjustments."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "ðŸ‘©â€ðŸ’» About Our Team\n\n\nWe are students from the Duke FinTech Program.  Our focus is on developing trading strategies through quantitative research, financial modeling, and interactive visualization.  This project represents our shared passion for finance, data science, and turning theory into practice."
  }
]